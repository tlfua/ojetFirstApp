define(['exports', 'preact/hooks', '../utils/UNSAFE_arrayUtils', '../utils/UNSAFE_keys', './UNSAFE_useUser', '../utils/PRIVATE_collectionUtils', '../index-182af2cd', 'preact', '../Common', '../Common/themes', '../Common/themes/redwood/theme', '../Common/themes/themeContract.css', 'preact/jsx-runtime', 'preact/compat', '../utils/PRIVATE_clientHints', '../clientHints-ff5d5d13'], (function(e,t,r,n,l,o,s,i,c,a,u,y,d,m,k,f){"use strict";r.stringLiteralArray(["toggle","replace"]);const p=(e,t,r,l,o,s,i,c,a,u)=>{const y=t(e.target);if(null==y)return;if(e.shiftKey&&void 0!==c&&u&&((e,t,r,l)=>"multiple"===r&&"toggle"!==l&&n.containsKey(t,e))(c,r,l,o))return u({value:{start:c,end:y}}),void(i&&(i.current=y));let d=r;n.containsKey(r,y)?"Enter"!==e.key&&("toggle"===o||e.ctrlKey||e.metaKey||" "===e.key?d=n.removeKey(r,y,s):"multiple"===l&&(r.all||r.keys.size>1)&&(d={all:!1,keys:new Set([y])})):d="single"===l||"Enter"===e.key||"replace"===o&&!e.ctrlKey&&!e.metaKey?{all:!1,keys:new Set([y])}:n.addKey(r,y),r!=d&&a&&(a({value:d,target:e.target}),"click"===e.type&&e.stopPropagation())};e.useSelection=function(e,r,s,i,c,a,u,y,d,m,k,f,K){const g=t.useRef(),v=t.useCallback((t=>{p(t,e,r,s,o.isMobile()?"toggle":c,i,g,y,u,K),t.shiftKey||(g.current=void 0)}),[e,r,s,c,i,g,y,u,K]),h=t.useCallback((t=>{(" "===t.key||"Enter"===t.key&&a)&&p(t,e,r,s,c,i,g,y,u,t.shiftKey&&" "===t.key?K:void 0)}),[e,r,s,c,i,y,u,K]),{direction:w}=l.useUser(),A="rtl"===w,C=t.useCallback((e=>{if(" "===e.key)return void e.preventDefault();const t=g.current||d,l={ArrowUp:m?.(t,!0),ArrowDown:m?.(t,!1),ArrowLeft:k?.(t,!A),ArrowRight:k?.(t,A)},o=m&&k;if(Object.keys(l).includes(e.key))if(e.shiftKey&&f&&"multiple"===s){let t=r;!g.current&&n.isKeyDefined(d)&&(t={all:!1,keys:new Set([d])});const s=l[e.key],c=s?.();null!=c&&(f(c),o?K&&null!=d&&K({value:{start:d,end:c}}):(n.containsKey(t,c)?null!=g.current&&g.current!==c&&(t=n.removeKey(t,g.current,i)):t=n.addKey(t,c),r!=t&&u&&u({value:t,target:e.target})),g.current=c)}else g.current=void 0}),[r,i,u,d,m,k,f]);return{selectionProps:"none"===s||null==u?{}:{onClick:v,onKeyDown:C,onKeyUp:h}}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=PRIVATE_useSelection.js.map
