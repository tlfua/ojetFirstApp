define(['exports', 'preact/hooks', './UNSAFE_useToggle'], (function(e,r,n){"use strict";e.useSpinning=({isStepDownDisabled:e,isStepUpDisabled:t,onSpin:o,onSpinComplete:u,onStep:c})=>{const{bool:s,setTrue:a,setFalse:l}=n.useToggle(!1),{bool:i,setTrue:p,setFalse:P}=n.useToggle(!1),d=r.useRef(null),f=r.useRef(null),w=r.useRef("increase"),k=r.useRef(!1),D=r.useCallback((r=>{"ArrowDown"!==r.key&&"ArrowUp"!==r.key||(r.preventDefault(),r.stopPropagation(),s||"ArrowDown"===r.key&&e||"ArrowUp"===r.key&&t||(w.current="ArrowDown"===r.key?"decrease":"increase",a(),c?.({direction:w.current})))}),[s,c,e,t,a]),g=r.useCallback((e=>{"ArrowDown"!==e.key&&"ArrowUp"!==e.key||(i&&(k.current=!0),l(),P(),e.stopPropagation())}),[i,l,P]),b=r.useCallback((e=>{e.stopPropagation(),e.preventDefault(),t||(w.current="increase",a(),c?.({direction:w.current}))}),[c,t,a]),y=r.useCallback((r=>{r.stopPropagation(),r.preventDefault(),e||(w.current="decrease",a(),c?.({direction:w.current}))}),[c,e,a]),A=r.useCallback((e=>{i&&(k.current=!0),l(),P(),e.stopPropagation()}),[i,l,P]);r.useEffect((()=>(s&&!d.current&&(d.current=setTimeout((()=>{p()}),500)),()=>{d.current&&(clearTimeout(d.current),d.current=null)})),[s,p]),r.useEffect((()=>(i?f.current||(f.current=setInterval((()=>{"increase"===w.current&&t||"decrease"===w.current&&e?(P(),k.current=!0):o?.({direction:w.current})}),40)):f.current&&(clearInterval(f.current),f.current=null),()=>{f.current&&(clearInterval(f.current),f.current=null)})),[i,e,t,o,P]),r.useEffect((()=>{!i&&k.current&&(k.current=!1,u?.())}),[i,u]);return{keyboardHandlerProps:{onKeyDown:D,onKeyUp:g},pointerIncreaseHandlerProps:{onPointerDown:b,onPointerUp:A,onPointerOut:A,onPointerCancel:A},pointerDecreaseHandlerProps:{onPointerDown:y,onPointerUp:A,onPointerOut:A,onPointerCancel:A}}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=UNSAFE_useSpinning.js.map
