{"version":3,"file":"TextFieldInput-17f3ed29.js","sources":["../../src/UNSAFE_TextField/TextFieldUtils.ts","../../src/UNSAFE_TextField/TextFieldInput.tsx"],"sourcesContent":["export const getInputId = (id?: string) => (id ?? '') + '|input';\n\nexport const isInputPlaceholderShown = (\n  hasInsideLabel: boolean,\n  hasValue: boolean,\n  isFocused?: boolean\n) => {\n  return !(hasInsideLabel && !hasValue && !isFocused);\n};\n","import { Ref } from 'preact';\nimport { useAccessibleContext } from '../hooks/UNSAFE_useAccessibleContext';\nimport { useFormFieldContext } from '../hooks/UNSAFE_useFormFieldContext';\nimport { useTabbableMode } from '../hooks/UNSAFE_useTabbableMode';\nimport { useTextFieldInputHandlers } from '../hooks/UNSAFE_useTextFieldInputHandlers';\nimport { classNames } from '../utils/UNSAFE_classNames';\nimport type { TextProps } from '../utils/UNSAFE_interpolations/text';\nimport { textInterpolations } from '../utils/UNSAFE_interpolations/text';\nimport { mergeInterpolations } from '../utils/UNSAFE_mergeInterpolations';\nimport { mergeProps } from '../utils/UNSAFE_mergeProps';\nimport { ValueUpdateDetail } from '../utils/UNSAFE_valueUpdateDetail';\nimport { isInputPlaceholderShown } from './TextFieldUtils';\nimport {\n  AriaAttributesSignalExcluded,\n  HTMLAttributesSignalExcluded\n} from '../utils/UNSAFE_attributeUtils';\nimport { useComponentTheme } from '../hooks/UNSAFE_useComponentTheme';\nimport { TextFieldInputVariantOptions } from './themes/TextFieldInputStyles.css';\nimport { useTranslationBundle } from '../hooks/UNSAFE_useTranslationBundle';\nimport { BundleType } from '../resources/nls/bundle';\nimport { TextFieldInputRedwoodTheme } from './themes/redwood/TextFieldInputTheme';\n\nconst interpolations = [...Object.values(textInterpolations)];\n\nconst styleInterpolations = mergeInterpolations<Props>(interpolations);\n\ntype Autocomplete = 'off' | 'on' | string;\n\ntype OrigPickedPropsFromInput = Pick<\n  HTMLAttributesSignalExcluded<HTMLInputElement>,\n  'autofocus' | 'id' | 'placeholder' | 'required' | 'role' | 'spellcheck' | 'type'\n>;\ntype RenamedPropsFromInput = Omit<\n  OrigPickedPropsFromInput,\n  'autofocus' | 'readonly' | 'required'\n> & {\n  autoFocus?: OrigPickedPropsFromInput['autofocus'];\n  isRequired?: OrigPickedPropsFromInput['required'];\n};\ntype InputProps = {\n  as?: 'input';\n  type?: Pick<HTMLAttributesSignalExcluded<HTMLInputElement>, 'type'>['type'];\n  rows?: never;\n  inputRef?: Ref<HTMLInputElement>;\n  hasPrefix?: boolean;\n  hasSuffix?: boolean;\n};\n\ntype TextAreaProps = {\n  as: 'textarea';\n  type?: never;\n  rows?: number;\n  inputRef?: Ref<HTMLTextAreaElement>;\n  hasPrefix?: never;\n  hasSuffix?: never;\n};\n\ntype FocusProps = Pick<HTMLAttributesSignalExcluded<HTMLElement>, 'onBlur' | 'onFocus'>;\n\ntype UniqueProps = InputProps | TextAreaProps;\n\ntype AriaProps = Pick<\n  AriaAttributesSignalExcluded,\n  | 'aria-autocomplete'\n  | 'aria-controls'\n  | 'aria-describedby'\n  | 'aria-expanded'\n  | 'aria-invalid'\n  | 'aria-label'\n  | 'aria-labelledby'\n  | 'aria-valuemax'\n  | 'aria-valuemin'\n  | 'aria-valuenow'\n  | 'aria-valuetext'\n>;\n\ntype Props = UniqueProps &\n  TextProps &\n  RenamedPropsFromInput &\n  AriaProps &\n  FocusProps & {\n    autoComplete?: Autocomplete;\n    // TODO: Should we expose has* props like these or should we pass this info\n    // via FormFieldContext?  (from review on 3/8/22)\n    currentCommitValue?: string;\n    hasEmptyLabel?: boolean;\n    hasEndContent?: boolean;\n    hasInsideLabel?: boolean;\n    hasStartContent?: boolean;\n    value?: string;\n    variant?: 'default' | 'embedded';\n    onInput?: (detail: ValueUpdateDetail<string>) => void;\n    onCommit?: (detail: ValueUpdateDetail<string>) => void;\n    onKeyDown?: (event: KeyboardEvent) => void;\n    onKeyUp?: (event: KeyboardEvent) => void;\n  };\n\n/**\n * Merge multiple ids into a space-separated list\n * @param ids The ids to be merged\n * @returns The space separated string of ids\n */\nfunction mergeIDs(...ids: (string | undefined)[]) {\n  return ids.filter(Boolean).join(' ') || undefined;\n}\n\nexport const TextFieldInput = ({\n  as = 'input',\n  'aria-autocomplete': ariaAutoComplete,\n  'aria-controls': ariaControls,\n  'aria-describedby': ariaDescribedBy,\n  'aria-expanded': ariaExpanded,\n  'aria-invalid': ariaInvalid,\n  'aria-label': ariaLabel,\n  'aria-labelledby': inputLabelledBy,\n  'aria-valuemax': ariaValueMax,\n  'aria-valuemin': ariaValueMin,\n  'aria-valuenow': ariaValueNow,\n  'aria-valuetext': ariaValueText,\n  autoComplete,\n  autoFocus,\n  currentCommitValue,\n  hasEmptyLabel,\n  hasEndContent = false,\n  hasInsideLabel = false,\n  hasPrefix = false,\n  hasStartContent = false,\n  hasSuffix = false,\n  id,\n  inputRef,\n  placeholder,\n  isRequired,\n  role,\n  rows,\n  spellcheck,\n  type,\n  value = '',\n  variant = 'default',\n  onInput,\n  onCommit,\n  onKeyDown,\n  onKeyUp,\n  onBlur,\n  onFocus,\n  ...props\n}: Props) => {\n  const { isDisabled, isFocused, isLoading, isReadonly } = useFormFieldContext();\n  const { class: styleInterpolationClasses } = styleInterpolations(props);\n  const hasValue = value !== '';\n  const isTextArea = as === 'textarea';\n  const isInput = as === 'input';\n  const isPassword = type === 'password';\n  const renderPrefix = !isDisabled && hasPrefix;\n  const renderSuffix = !isDisabled && hasSuffix;\n  const myPlaceholder = isInputPlaceholderShown(hasInsideLabel, hasValue, isFocused)\n    ? placeholder\n    : undefined;\n\n  const { classes } = useComponentTheme<TextFieldInputVariantOptions>(TextFieldInputRedwoodTheme, {\n    type: isPassword ? 'isPassword' : 'notPassword',\n    styleVariant: variant,\n    textarea: isTextArea ? 'isTextArea' : 'notTextArea',\n    input: isInput ? 'isInput' : 'notInput',\n    prefix: renderPrefix ? 'hasPrefix' : 'noPrefix',\n    suffix: renderSuffix ? 'hasSuffix' : 'noSuffix',\n    startContent: hasStartContent ? 'hasStartContent' : 'noStartContent',\n    endContent: hasEndContent ? 'hasEndContent' : 'noEndContent',\n    insideLabel: hasInsideLabel ? 'hasInsideLabel' : 'noInsideLabel',\n    value: hasValue ? 'hasValue' : 'noValue',\n    focused: isFocused ? 'isFocused' : 'notFocused',\n    disabled: isDisabled ? 'isDisabled' : 'notDisabled'\n  });\n\n  const inputClasses = classNames([classes, styleInterpolationClasses]);\n  const Comp = as || 'input';\n  const textFieldInputHandlers = useTextFieldInputHandlers({\n    currentCommitValue,\n    value,\n    onInput,\n    onCommit,\n    onKeyDown\n  });\n  const handlers = mergeProps(textFieldInputHandlers, { onBlur, onFocus });\n  // the implicit default for tabindex on an input is 0, so do not explicitly set it.\n  // JET-52914 - Implement Tabbable mode API contract in InputText\n  // if not tabbable, spread tabbableModeProps on component\n  const { isTabbable, tabbableModeProps } = useTabbableMode();\n  // TODO: for autoComplete='off', need to configure attrs appropriately to make sure it\n  // works across browsers and versions  (from review on 3/11/22)\n\n  // JET-52089: add unsafe API for specifying an external label which is added to ariaLabelledBy on the input,\n  // only when labelEdge is 'none' and label is ''. Since ariaLabelledBy takes precedence over all other\n  // kinds of labels, this helps to ensure we don't override a meaningful label.\n  const { UNSAFE_ariaLabelledBy } = useAccessibleContext();\n  const ariaLabelledBy = hasEmptyLabel\n    ? mergeIDs(inputLabelledBy, UNSAFE_ariaLabelledBy)\n    : inputLabelledBy;\n\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n  const loadingAriaLabel = translations.formControl_loading();\n\n  return (\n    <Comp\n      aria-autocomplete={ariaAutoComplete}\n      aria-controls={ariaControls}\n      aria-describedby={ariaDescribedBy}\n      aria-expanded={ariaExpanded}\n      aria-invalid={ariaInvalid}\n      aria-label={isLoading ? loadingAriaLabel : ariaLabel ? ariaLabel : undefined}\n      aria-labelledby={ariaLabelledBy}\n      aria-required={isRequired ? true : undefined}\n      aria-valuemax={ariaValueMax}\n      aria-valuemin={ariaValueMin}\n      aria-valuenow={ariaValueNow}\n      aria-valuetext={ariaValueText}\n      autocomplete={autoComplete}\n      autofocus={autoFocus}\n      class={inputClasses}\n      disabled={isDisabled}\n      id={id}\n      onKeyUp={onKeyUp}\n      placeholder={myPlaceholder}\n      readonly={isReadonly}\n      // @ts-ignore\n      ref={inputRef}\n      role={role}\n      rows={rows}\n      spellcheck={spellcheck}\n      type={type}\n      value={value}\n      {...handlers}\n      {...(!isTabbable && tabbableModeProps)}\n    />\n  );\n};\n"],"names":["isInputPlaceholderShown","hasInsideLabel","hasValue","isFocused","interpolations","Object","values","textInterpolations","styleInterpolations","mergeInterpolations","as","ariaAutoComplete","ariaControls","ariaDescribedBy","ariaExpanded","ariaInvalid","ariaLabel","inputLabelledBy","ariaValueMax","ariaValueMin","ariaValueNow","ariaValueText","autoComplete","autoFocus","currentCommitValue","hasEmptyLabel","hasEndContent","hasPrefix","hasStartContent","hasSuffix","id","inputRef","placeholder","isRequired","role","rows","spellcheck","type","value","variant","onInput","onCommit","onKeyDown","onKeyUp","onBlur","onFocus","props","isDisabled","isLoading","isReadonly","useFormFieldContext","class","styleInterpolationClasses","isTextArea","isInput","isPassword","renderPrefix","renderSuffix","myPlaceholder","undefined","classes","useComponentTheme","TextFieldInputRedwoodTheme","styleVariant","textarea","input","prefix","suffix","startContent","endContent","insideLabel","focused","disabled","inputClasses","classNames","Comp","textFieldInputHandlers","useTextFieldInputHandlers","handlers","mergeProps","isTabbable","tabbableModeProps","useTabbableMode","UNSAFE_ariaLabelledBy","useAccessibleContext","ariaLabelledBy","ids","filter","Boolean","join","mergeIDs","loadingAriaLabel","useTranslationBundle","formControl_loading","_jsx","autocomplete","autofocus","readonly","ref"],"mappings":"8gBAAa,MAEAA,EAA0B,CACrCC,EACAC,EACAC,MAESF,IAAmBC,IAAaC,GCerCC,EAAiB,IAAIC,OAAOC,OAAOC,EAAAA,qBAEnCC,EAAsBC,EAAAA,oBAA2BL,oBAkFzB,EAC5BM,KAAK,QACL,oBAAqBC,EACrB,gBAAiBC,EACjB,mBAAoBC,EACpB,gBAAiBC,EACjB,eAAgBC,EAChB,aAAcC,EACd,kBAAmBC,EACnB,gBAAiBC,EACjB,gBAAiBC,EACjB,gBAAiBC,EACjB,iBAAkBC,EAClBC,eACAC,YACAC,qBACAC,gBACAC,iBAAgB,EAChBzB,kBAAiB,EACjB0B,aAAY,EACZC,mBAAkB,EAClBC,aAAY,EACZC,KACAC,WACAC,cACAC,aACAC,OACAC,OACAC,aACAC,OACAC,QAAQ,GACRC,UAAU,UACVC,UACAC,WACAC,YACAC,UACAC,SACAC,aACGC,MAEH,MAAMC,WAAEA,EAAU5C,UAAEA,EAAS6C,UAAEA,EAASC,WAAEA,GAAeC,EAAAA,uBACjDC,MAAOC,IAA8B5C,EAAoBsC,GAC3D5C,GAAqB,KAAVoC,EACXe,GAAoB,aAAP3C,EACb4C,GAAiB,UAAP5C,EACV6C,GAAsB,aAATlB,EACbmB,IAAgBT,GAAcpB,EAC9B8B,IAAgBV,GAAclB,EAC9B6B,GAAgB1D,EAAwBC,EAAgBC,GAAUC,GACpE6B,OACA2B,GAEEC,QAAEA,IAAYC,EAAiBA,kBAA+BC,6BAA4B,CAC9FzB,KAAMkB,GAAa,aAAe,cAClCQ,aAAcxB,EACdyB,SAAUX,GAAa,aAAe,cACtCY,MAAOX,GAAU,UAAY,WAC7BY,OAAQV,GAAe,YAAc,WACrCW,OAAQV,GAAe,YAAc,WACrCW,aAAcxC,EAAkB,kBAAoB,iBACpDyC,WAAY3C,EAAgB,gBAAkB,eAC9C4C,YAAarE,EAAiB,iBAAmB,gBACjDqC,MAAOpC,GAAW,WAAa,UAC/BqE,QAASpE,EAAY,YAAc,aACnCqE,SAAUzB,EAAa,aAAe,gBAGlC0B,GAAeC,EAAUA,WAAC,CAACd,GAASR,KACpCuB,GAAOjE,GAAM,QACbkE,GAAyBC,EAAAA,0BAA0B,CACvDrD,qBACAc,QACAE,UACAC,WACAC,cAEIoC,GAAWC,EAAAA,WAAWH,GAAwB,CAAEhC,SAAQC,aAIxDmC,WAAEA,GAAUC,kBAAEA,IAAsBC,EAAeA,mBAOnDC,sBAAEA,IAA0BC,EAAAA,uBAC5BC,GAAiB5D,EA5FzB,YAAqB6D,GACnB,OAAOA,EAAIC,OAAOC,SAASC,KAAK,WAAQ9B,CAC1C,CA2FM+B,CAASzE,EAAiBkE,IAC1BlE,EAGE0E,GADeC,uBAAiC,4BAChBC,sBAEtC,OACEC,MAACnB,GACoB,CAAA,oBAAAhE,kBACJC,EAAY,mBACTC,EAAe,gBAClBC,EACD,eAAAC,eACFiC,EAAY2C,GAAmB3E,QAAwB2C,EAAS,kBAC3D0B,GACF,kBAAApD,QAAoB0B,kBACpBzC,EAAY,gBACZC,EAAY,gBACZC,EACC,iBAAAC,EAChB0E,aAAczE,EACd0E,UAAWzE,EACX4B,MAAOsB,GACPD,SAAUzB,EACVjB,GAAIA,EACJa,QAASA,EACTX,YAAa0B,GACbuC,SAAUhD,EAEViD,IAAKnE,EACLG,KAAMA,EACNC,KAAMA,EACNC,WAAYA,EACZC,KAAMA,EACNC,MAAOA,KACHwC,OACEE,IAAcC,IAEtB,eDzOuBnD,IAAiBA,GAAM,IAAM"}