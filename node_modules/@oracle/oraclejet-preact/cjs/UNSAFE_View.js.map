{"version":3,"file":"UNSAFE_View.js","sources":["../../src/UNSAFE_View/View.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { ComponentChildren, RefCallback, RefObject } from 'preact';\nimport { forwardRef } from 'preact/compat';\nimport { borderInterpolations } from '../utils/UNSAFE_interpolations/borders';\nimport type { BorderProps } from '../utils/UNSAFE_interpolations/borders';\nimport { dimensionInterpolations } from '../utils/UNSAFE_interpolations/dimensions';\nimport type { DimensionProps } from '../utils/UNSAFE_interpolations/dimensions';\nimport { flexitemInterpolations } from '../utils/UNSAFE_interpolations/flexitem';\nimport type { FlexitemProps } from '../utils/UNSAFE_interpolations/flexitem';\nimport { colorInterpolations } from '../utils/UNSAFE_interpolations/colors';\nimport type { ColorProps } from '../utils/UNSAFE_interpolations/colors';\nimport { paddingInterpolations } from '../utils/UNSAFE_interpolations/padding';\nimport type { PaddingProps } from '../utils/UNSAFE_interpolations/padding';\nimport { ariaInterpolations } from '../utils/UNSAFE_interpolations/aria';\nimport type { AriaProps } from '../utils/UNSAFE_interpolations/aria';\nimport { themeInterpolations } from '../utils/UNSAFE_interpolations/theme';\nimport type { ThemeProps } from '../utils/UNSAFE_interpolations/theme';\nimport { mergeInterpolations } from '../utils/UNSAFE_mergeInterpolations';\nimport { stringLiteralArray } from '../utils/UNSAFE_arrayUtils';\nimport type { Role } from '../utils/UNSAFE_roles';\nimport { EnvironmentProvider } from '..//UNSAFE_Environment';\nimport type { ThemeModifiers } from '../UNSAFE_Theme';\nimport { isEmpty } from 'ramda';\nimport { globalVars } from '../Common/themes/themeContract.css';\nimport { assignInlineVars } from '@vanilla-extract/dynamic';\n\nconst elementTypes = stringLiteralArray(['div', 'main', 'article', 'section', 'aside']);\n\ntype ElementType = typeof elementTypes[number];\n\ntype StyleProps = BorderProps &\n  DimensionProps &\n  FlexitemProps &\n  ColorProps &\n  PaddingProps &\n  AriaProps &\n  ThemeProps;\n\ntype Props = StyleProps & {\n  as?: ElementType;\n  role?: Role;\n  children?: ComponentChildren;\n};\n\nconst interpolations = [\n  ...Object.values(borderInterpolations),\n  ...Object.values(dimensionInterpolations),\n  ...Object.values(flexitemInterpolations),\n  ...Object.values(colorInterpolations),\n  ...Object.values(paddingInterpolations),\n  ...Object.values(ariaInterpolations),\n  ...Object.values(themeInterpolations)\n];\n\nconst mergedInterpolations = mergeInterpolations<Props>(interpolations);\n\ntype RefType = (RefObject<HTMLDivElement> | RefCallback<HTMLDivElement>) &\n  (RefObject<HTMLElement> | RefCallback<HTMLElement>);\n\nexport const View = forwardRef<RefType, Props>((props, ref) => {\n  const { as, children, colorScheme, scale, color, backgroundColor, ...rest } = props;\n  const {\n    class: cls,\n    ariaLabelledBy,\n    ariaLabel,\n    ...styles\n  } = mergedInterpolations({\n    colorScheme,\n    scale,\n    backgroundColor,\n    color,\n    ...rest\n  });\n  const env: Partial<ThemeModifiers> = {};\n  // We need to update the environment with any theme related props specified\n  if (colorScheme) {\n    env.colorScheme = colorScheme;\n  }\n  if (scale) {\n    env.scale = scale;\n  }\n  let assignedVars = {}; // empty var override unless background is specified\n  if (backgroundColor) {\n    env.currentBgColor = backgroundColor;\n    assignedVars = assignInlineVars({\n      [globalVars.currentBackgroundColor]: styles['backgroundColor']\n    });\n  }\n\n  // we hardcode box-sizing: border-box on all of our Preact components.\n  const localStyles = { boxSizing: 'border-box' };\n  const Component = as || 'div';\n\n  const viewComponent = (\n    <Component\n      aria-label={ariaLabel}\n      aria-labelledby={ariaLabelledBy}\n      class={cls}\n      style={{ ...styles, ...localStyles, ...assignedVars }}\n      ref={ref as RefType}>\n      {children}\n    </Component>\n  );\n  return isEmpty(env) ? (\n    viewComponent\n  ) : (\n    <EnvironmentProvider environment={env}>{viewComponent}</EnvironmentProvider>\n  );\n});\n\nexport { elementTypes };\n"],"names":["stringLiteralArray","borderInterpolations","dimensionInterpolations","flexitemInterpolations","colorInterpolations","paddingInterpolations","ariaInterpolations","themeInterpolations","mergeInterpolations","forwardRef","assignInlineVars","globalVars","_jsx","isEmpty","EnvironmentProvider"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA,MAAM,YAAY,GAAGA,0CAAkB,CAAC,CAAC,KAAK,EAAE,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,OAAO,CAAC,EAAE;AAkBxF,MAAM,cAAc,GAAG;AACrB,IAAA,GAAG,MAAM,CAAC,MAAM,CAACC,wDAAoB,CAAC;AACtC,IAAA,GAAG,MAAM,CAAC,MAAM,CAACC,8DAAuB,CAAC;AACzC,IAAA,GAAG,MAAM,CAAC,MAAM,CAACC,+BAAsB,CAAC;AACxC,IAAA,GAAG,MAAM,CAAC,MAAM,CAACC,sDAAmB,CAAC;AACrC,IAAA,GAAG,MAAM,CAAC,MAAM,CAACC,yDAAqB,CAAC;AACvC,IAAA,GAAG,MAAM,CAAC,MAAM,CAACC,mDAAkB,CAAC;AACpC,IAAA,GAAG,MAAM,CAAC,MAAM,CAACC,qDAAmB,CAAC;CACtC,CAAC;AAEF,MAAM,oBAAoB,GAAGC,oDAAmB,CAAQ,cAAc,CAAC,CAAC;AAK3D,MAAA,IAAI,GAAGC,iBAAU,CAAiB,CAAC,KAAK,EAAE,GAAG,KAAI;AAC5D,IAAA,MAAM,EAAE,EAAE,EAAE,QAAQ,EAAE,WAAW,EAAE,KAAK,EAAE,KAAK,EAAE,eAAe,EAAE,GAAG,IAAI,EAAE,GAAG,KAAK,CAAC;AACpF,IAAA,MAAM,EACJ,KAAK,EAAE,GAAG,EACV,cAAc,EACd,SAAS,EACT,GAAG,MAAM,EACV,GAAG,oBAAoB,CAAC;QACvB,WAAW;QACX,KAAK;QACL,eAAe;QACf,KAAK;AACL,QAAA,GAAG,IAAI;AACR,KAAA,CAAC,CAAC;IACH,MAAM,GAAG,GAA4B,EAAE,CAAC;;AAExC,IAAA,IAAI,WAAW,EAAE;AACf,QAAA,GAAG,CAAC,WAAW,GAAG,WAAW,CAAC;AAC/B,KAAA;AACD,IAAA,IAAI,KAAK,EAAE;AACT,QAAA,GAAG,CAAC,KAAK,GAAG,KAAK,CAAC;AACnB,KAAA;AACD,IAAA,IAAI,YAAY,GAAG,EAAE,CAAC;AACtB,IAAA,IAAI,eAAe,EAAE;AACnB,QAAA,GAAG,CAAC,cAAc,GAAG,eAAe,CAAC;QACrC,YAAY,GAAGC,0CAAgB,CAAC;YAC9B,CAACC,0CAAU,CAAC,sBAAsB,GAAG,MAAM,CAAC,iBAAiB,CAAC;AAC/D,SAAA,CAAC,CAAC;AACJ,KAAA;;AAGD,IAAA,MAAM,WAAW,GAAG,EAAE,SAAS,EAAE,YAAY,EAAE,CAAC;AAChD,IAAA,MAAM,SAAS,GAAG,EAAE,IAAI,KAAK,CAAC;AAE9B,IAAA,MAAM,aAAa,IACjBC,cAAA,CAAC,SAAS,EACI,EAAA,YAAA,EAAA,SAAS,EACJ,iBAAA,EAAA,cAAc,EAC/B,KAAK,EAAE,GAAG,EACV,KAAK,EAAE,EAAE,GAAG,MAAM,EAAE,GAAG,WAAW,EAAE,GAAG,YAAY,EAAE,EACrD,GAAG,EAAE,GAAc,EAAA,QAAA,EAClB,QAAQ,EAAA,CACC,CACb,CAAC;IACF,OAAOC,aAAO,CAAC,GAAG,CAAC,IACjB,aAAa,KAEbD,cAAA,CAACE,sCAAmB,EAAA,EAAC,WAAW,EAAE,GAAG,EAAG,QAAA,EAAA,aAAa,EAAuB,CAAA,CAC7E,CAAC;AACJ,CAAC;;;;;"}