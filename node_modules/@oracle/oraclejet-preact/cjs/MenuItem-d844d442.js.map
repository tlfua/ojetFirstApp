{"version":3,"file":"MenuItem-d844d442.js","sources":["../../src/UNSAFE_Menu/menuUtils.ts","../../src/UNSAFE_Menu/MenuContext.ts","../../src/UNSAFE_Menu/useMenuContext.ts","../../src/UNSAFE_Menu/MenuContainerContext.ts","../../src/UNSAFE_Menu/useMenuContainerContext.ts","../../src/UNSAFE_Menu/useSubmenuItemHover.ts","../../src/UNSAFE_Menu/MenuItem.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { ComponentProps } from 'preact';\nimport { getClientHints } from '../utils/PRIVATE_clientHints';\n\nimport { Menu } from './Menu';\n\n/**\n * Returns the key from the item element\n */\nexport const getKey = (item: HTMLElement) => {\n  // Key is set on data-oj-menu-item-key on each menuItem. To get this key from the\n  // the actual menuItem we need to do a kebab to camel-case conversion.\n  return item.dataset['ojMenuItemKey'];\n};\n\n/**\n * A helper function that return the key of the n available item.\n */\nexport const getNVisible = (root: HTMLElement | null, positionIndex: number) => {\n  if (root) {\n    const items = root.querySelectorAll('[data-oj-menu-item-key]');\n    const positionedItem = items[positionIndex] as HTMLElement;\n    if (positionedItem) {\n      const key = getKey(positionedItem as HTMLElement);\n      if (key) {\n        return key;\n      }\n    }\n  }\n  return null;\n};\n\n/**\n * A helper function that return the key of the last available item.\n */\nexport const getLastVisible = (root: HTMLElement | null) => {\n  if (root) {\n    const items = root.querySelectorAll('[data-oj-menu-item-key]');\n    const lastItem = items[items.length - 1] as HTMLElement;\n    if (lastItem) {\n      const key = getKey(lastItem as HTMLElement);\n      if (key) {\n        return key;\n      }\n    }\n  }\n  return null;\n};\n\n/**\n * A helper function that returns the key of the previous or the next item\n * given the specified current key\n */\nexport const getPrevNext = (root: HTMLElement | null, isPrev: boolean, currentKey?: string) => {\n  return (): string | null => {\n    if (root) {\n      const items = Array.from(root.querySelectorAll('[data-oj-menu-item-key]')) as HTMLElement[];\n      const currentKeyIndex = items.findIndex((item) => getKey(item) === currentKey);\n      let nextIndex = currentKeyIndex + (isPrev ? -1 : 1);\n      const itemsLastIndex = items.length - 1;\n      if (nextIndex < 0) {\n        nextIndex = itemsLastIndex;\n      }\n      if (nextIndex > itemsLastIndex) {\n        nextIndex = 0;\n      }\n\n      const key = getKey(items[nextIndex]);\n      return key ? key : null;\n    }\n    return null;\n  };\n};\n\n/**\n * A helper function to get the key from an element\n */\nexport const keyElemExtractor = (\n  element: HTMLElement\n): { key: string; elem: HTMLElement } | null => {\n  const elem = element.closest('[data-oj-menu-item-key]') as HTMLElement;\n  if (elem) {\n    const key = getKey(elem as HTMLElement);\n    return key === undefined ? null : ({ key, elem } as { key: string; elem: HTMLElement });\n  }\n  return null;\n};\n\n/**\n * Function to get the corresponding keyboard behavior to close the menu.\n */\nexport const getKeyboardCloseProps = (\n  onClose: ComponentProps<typeof Menu>['onClose'],\n  menuLevel: 'main' | 'sub'\n) => {\n  const onKeyDown = (event: KeyboardEvent) => {\n    if (event.key === 'Tab') {\n      event.stopPropagation();\n      onClose?.({ reason: 'dismissed' });\n      event.preventDefault(); //TODO: Revisit this since we should let focus be at its natural flow, quick solution for now to focus correct item in main use case\n    } else if (event.key === 'Escape' && menuLevel === 'main') {\n      event.stopPropagation();\n      onClose?.({ reason: 'dismissed' });\n    }\n  };\n  return { onKeyDown };\n};\n\n/**\n * Function to get the corresponding specific behavior for closing submenu via keyboard\n */\nexport const getCloseSubmenuEvent = (direction: 'ltr' | 'rtl', closeSubmenu?: () => void) => {\n  if (!closeSubmenu) {\n    return {};\n  }\n  const onKeyDown = (e: KeyboardEvent) => {\n    if (\n      e.key === 'Escape' ||\n      (direction === 'ltr' && e.key === 'ArrowLeft') ||\n      (direction === 'rtl' && e.key === 'ArrowRight')\n    ) {\n      e.stopPropagation();\n      closeSubmenu?.();\n    }\n  };\n  return { onKeyDown };\n};\n\n/**\n * Function to get the corresponding specific behavior for opening submenu via keyboard\n */\nexport const getOpenSubmenuEvent = (direction: 'ltr' | 'rtl', openSubmenu?: () => void) => {\n  if (!openSubmenu) {\n    return {};\n  }\n  const onKeyDown = (e: KeyboardEvent) => {\n    if (direction === 'ltr') {\n      if (e.key === 'ArrowRight') {\n        openSubmenu?.();\n      }\n    } else {\n      if (e.key === 'ArrowLeft') {\n        openSubmenu?.();\n      }\n    }\n  };\n  return { onKeyDown };\n};\n\n/**\n * Function to get type of device\n */\nexport const getIsMobile = () => {\n  const { deviceType } = getClientHints();\n  return deviceType === 'phone';\n};\n\n/**\n * Get blur and focus events\n */\nexport const getMenuContainerFocusMethods = (\n  blurFunction: () => void,\n  focusFunction: () => void\n) => {\n  const onBlur = () => {\n    setTimeout(() => {\n      blurFunction();\n    }, 100);\n  };\n\n  const onFocus = () => {\n    focusFunction();\n  };\n\n  return { onBlur, onFocus };\n};\n\n/**\n * Set currentKey based on clicking menuItem\n */\nexport const getMenuItemClickChangeKey = (\n  key: string,\n  changeKeyMethod: (payload: { key: string; reason: 'click' | 'mouseEnter' | 'keyboard' }) => void\n) => {\n  const onClick = () => {\n    changeKeyMethod({ key, reason: 'click' });\n  };\n  return { onClick };\n};\n\nexport const getMenuContainerMouseLeave = (mouseLeaveFunction: (e: MouseEvent) => void) => {\n  const onMouseLeave = (e: MouseEvent) => {\n    mouseLeaveFunction(e);\n  };\n  return { onMouseLeave };\n};\n\n/**\n * Function to get the corresponding specific behavior for clicking/touching down menuContainer\n */\nexport const getMenuPointerDown = () => {\n  const onPointerDown = (event: PointerEvent) => {\n    //We just want to prevent default when element that was\n    //pressed down was not a menu item.\n    const keyElem = keyElemExtractor(event.target as HTMLElement);\n    if (!keyElem?.key) {\n      event.preventDefault();\n    }\n  };\n  return { onPointerDown };\n};\n\nexport type MenuValueUpdateDetail<T> = {\n  previousValue?: T;\n  value: T;\n};\n\nexport type MenuCollectionItem = {\n  key?: string;\n  reason: 'mouseEnter' | 'click' | 'keyboard';\n};\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { createContext, ComponentProps } from 'preact';\n\nimport { Menu } from './Menu';\n\ntype Props = {\n  isMobile: boolean;\n  onClose: ComponentProps<typeof Menu>['onClose'];\n};\n\n/**\n * Context used to pass menu information without having to pass it to menu children props.\n * We want to communicate information down to any interested menu item children.\n */\nconst MenuContext = createContext<Props>({\n  isMobile: false,\n  onClose: () => null\n});\n\nexport { MenuContext };\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { useContext } from 'preact/hooks';\n\nimport { MenuContext } from './MenuContext';\n\n/**\n * Utility hook for consuming the MenuContext\n *\n * @returns The value of MenuContext provider\n */\nfunction useMenuContext() {\n  return useContext(MenuContext);\n}\n\nexport { useMenuContext };\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { createContext } from 'preact';\nimport { MutableRef } from 'preact/hooks';\n\nimport { MenuCollectionItem } from './menuUtils';\n\nexport type MenuContainerContextProps = {\n  menuContainerRef: MutableRef<HTMLDivElement | null>;\n  currentKey?: string;\n  showFocusRing: boolean;\n  changeKey: (detail: MenuCollectionItem) => void;\n  isContainerFocused: boolean;\n  menuContainerGeneralInformation: MutableRef<{\n    wasMouseMoved: boolean;\n    lastMouseLeaveMenuItemdRelatedTarget: HTMLElement | null;\n  }>;\n};\n/**\n * Context used to pass menu information without having to pass it to menu children MenuContainerContextprops.\n * We want to communicate information down to any interested menu item children.\n */\nconst MenuContainerContext = createContext<MenuContainerContextProps>({\n  menuContainerRef: { current: null },\n  currentKey: undefined,\n  showFocusRing: false,\n  changeKey: () => {},\n  isContainerFocused: false,\n  menuContainerGeneralInformation: {\n    current: {\n      wasMouseMoved: false,\n      lastMouseLeaveMenuItemdRelatedTarget: null\n    }\n  }\n});\n\nexport { MenuContainerContext };\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { useContext } from 'preact/hooks';\n\nimport { MenuContainerContext } from './MenuContainerContext';\n\n/**\n * Utility hook for consuming the MenuContainerContext\n *\n * @returns The value of MenuContainerContext provider\n */\nfunction useMenuContainerContext() {\n  return useContext(MenuContainerContext);\n}\n\nexport { useMenuContainerContext };\n","import { useToggle } from '../hooks/UNSAFE_useToggle';\n\nexport type HoverOptions = {\n  onMouseEnter: (e: MouseEvent) => void;\n  onMouseLeave: (e: MouseEvent) => void;\n};\n/**\n * Returns listeners and status for hover\n *\n *\n * @returns\n */\nexport function useSubmenuItemHover(settings: HoverOptions): {\n  hoverProps: Record<string, any>;\n} {\n  const { bool: ignore, setTrue: setIgnoreTrue, setFalse: setIgnoreFalse } = useToggle(false);\n  const startHover = (e: MouseEvent) => {\n    if (ignore) {\n      setIgnoreFalse();\n    } else {\n      settings.onMouseEnter(e);\n    }\n  };\n\n  const hoverProps = {\n    ontouchend: setIgnoreTrue,\n    onMouseEnter: startHover,\n    onMouseLeave: (e: MouseEvent) => {\n      settings.onMouseLeave(e);\n    }\n  };\n  return {\n    hoverProps: hoverProps\n  };\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { MutableRef, useLayoutEffect, useMemo, useRef, useCallback } from 'preact/hooks';\nimport { ComponentChildren } from 'preact';\n\nimport { Text } from '../UNSAFE_Text';\nimport { classNames } from '../utils/UNSAFE_classNames';\nimport { useId } from '../hooks/UNSAFE_useId';\nimport { mergeProps } from '../utils/UNSAFE_mergeProps';\nimport { usePress } from '../hooks/UNSAFE_usePress';\nimport { useUser } from '../hooks/UNSAFE_useUser';\nimport { useComponentTheme } from '../hooks/UNSAFE_useComponentTheme';\nimport { mergeInterpolations } from '../utils/UNSAFE_mergeInterpolations';\nimport { flexitemInterpolations } from '../utils/UNSAFE_interpolations/flexitem';\nimport type { FlexitemProps } from '../utils/UNSAFE_interpolations/flexitem';\nimport { useInteractionStyle } from '../hooks/UNSAFE_useInteractionStyle';\n\nimport { useMenuContext } from './useMenuContext';\nimport { ForwardedRef, forwardRef } from 'preact/compat';\nimport { getMenuItemClickChangeKey, getOpenSubmenuEvent } from './menuUtils';\nimport { useMenuContainerContext } from './useMenuContainerContext';\nimport { useSubmenuItemHover } from './useSubmenuItemHover';\nimport { MenuItemStyles, MenuItemVariantOptions } from './themes/MenuItemStyles.css';\nimport { MenuItemRedwoodTheme } from './themes/redwood/MenuItemTheme';\n\ntype MenuItemProps = BaseBaseMenuItemProps;\n\ntype BaseBaseMenuItemProps = {\n  label: string;\n  onAction?: () => void;\n  startIcon?: ComponentChildren;\n  endIcon?: ComponentChildren;\n  isDisabled?: boolean;\n  variant?: 'standard' | 'destructive';\n};\n\nexport function MenuItem(props: MenuItemProps) {\n  const uniqueID = useId();\n  const id = useMemo(() => `oj-menu-item-${uniqueID}`, [uniqueID]);\n  return <BaseMenuItem {...props} role=\"menuitem\" type=\"simple\" id={id}></BaseMenuItem>;\n}\n//TODO:Omit<T, K> utility type does not distribute over union types in T. Have to check what can we do for\n//the discriminated union to be working. JET-57191\ntype BaseMenuItemProps = (SimpleBaseMenuItem | SelectBaseMenuItem | SubmenuBaseMenuItem) &\n  Omit<BaseBaseMenuItemProps, 'onAction'> & {\n    id: string;\n    menuItemLabelWeight?: 'normal' | 'bold';\n    onAction?: (e: Event) => void;\n  };\n\ntype SimpleBaseMenuItem = {\n  type: 'simple';\n  role: 'menuitem';\n} & ExcludedSubmenuProps &\n  ExcludedSelectProps;\n\ntype SelectBaseMenuItem = {\n  type: 'select';\n  role: 'menuitemcheckbox' | 'menuitemradio';\n  isChecked?: boolean;\n} & ExcludedSubmenuProps;\n\ntype SubmenuBaseMenuItem = {\n  type: 'submenu';\n  role: 'menuitem';\n} & IncludedSubmenuProps &\n  ExcludedSelectProps;\n\ntype ExcludedSubmenuProps = {\n  hoverInfo?: never;\n  openSubmenu?: never;\n  isSubmenuOpen?: never;\n  submenuId?: never;\n  submenuRef?: never;\n};\ntype IncludedSubmenuProps = {\n  hoverInfo?: {\n    hoverProps: Record<string, any>;\n    hoverStatus: MutableRef<{ recentClose: boolean; pendingUnhover: boolean }>;\n  };\n  openSubmenu?: () => void;\n  isSubmenuOpen?: boolean;\n  submenuId?: string;\n  submenuRef?: MutableRef<HTMLDivElement | null>;\n};\n\ntype ExcludedSelectProps = {\n  isChecked?: never;\n};\n\n//TODO: We have to comeback to this and see if we create new components to represent different types on menuItems\n//instead of using type prop. It also includes a new definition on prop types. This also includes the exposing of id\n//that is used by submenus. JET-57191\nexport const BaseMenuItem = forwardRef(\n  (\n    {\n      id,\n      label,\n      onAction,\n      startIcon,\n      endIcon,\n      role,\n      isChecked,\n      isDisabled = false,\n      variant = 'standard',\n      type,\n      hoverInfo,\n      openSubmenu,\n      menuItemLabelWeight = 'normal',\n      isSubmenuOpen,\n      submenuId,\n      submenuRef\n    }: BaseMenuItemProps,\n    ref?: ForwardedRef<HTMLAnchorElement>\n  ) => {\n    const { onClose } = useMenuContext();\n    const {\n      currentKey,\n      changeKey,\n      showFocusRing,\n      menuContainerRef,\n      menuContainerGeneralInformation,\n      isContainerFocused\n    } = useMenuContainerContext();\n\n    const menuItemRef = useRef<HTMLAnchorElement | null>(null);\n    const { direction } = useUser();\n\n    const isCurrent = currentKey === id;\n\n    const handleItemSelection = useCallback(\n      (e: Event) => {\n        //We don't want to close the menu if the element is a submenu one\n        if (type !== 'submenu') {\n          onClose?.({ reason: 'itemAction' });\n        }\n        onAction?.(e);\n      },\n      [type, onClose, onAction]\n    );\n\n    /*This hook is not used to just know is something is hover or not. Actual callbacks are run when mouse enter\n    or leave the menu item (to focus items when hovering and open submenus if the item is a submenu).  We don't use\n    useInteractionStyle hook for hovering since \"hovering style\" is more of a \"focus\" style in this context */\n    const { hoverProps } = useSubmenuItemHover({\n      onMouseEnter: (e: MouseEvent) => {\n        if (\n          !(\n            hoverInfo?.hoverStatus.current.recentClose ||\n            hoverInfo?.hoverStatus.current.pendingUnhover\n          )\n        ) {\n          if (hoverInfo && menuContainerGeneralInformation.current.wasMouseMoved) {\n            hoverInfo.hoverStatus.current.pendingUnhover = true;\n          }\n          // Mouse needs to be already moved to trigger mouse enter event\n          if (menuContainerGeneralInformation.current.wasMouseMoved) {\n            hoverInfo?.hoverProps['onMouseEnter'](e);\n            changeKey({\n              key: id,\n              reason: 'mouseEnter'\n            });\n          }\n        }\n      },\n      onMouseLeave: (e: MouseEvent) => {\n        if (hoverInfo) {\n          hoverInfo.hoverStatus.current.pendingUnhover = false;\n        }\n        //We check if new hover element is part of the menuContainer or submenu is there is one\n        if (\n          menuContainerRef.current?.contains(e.relatedTarget as Element) ||\n          submenuRef?.current?.contains(e.relatedTarget as Element)\n        ) {\n          menuContainerGeneralInformation.current.lastMouseLeaveMenuItemdRelatedTarget =\n            e.relatedTarget as HTMLElement;\n        }\n      }\n    });\n\n    const { pressProps } = usePress(handleItemSelection, { isDisabled });\n\n    useLayoutEffect(() => {\n      if (isCurrent) {\n        menuItemRef.current?.focus();\n      }\n    }, [isCurrent]);\n\n    const { interactionProps } = useInteractionStyle(isDisabled);\n\n    const {\n      classes: menuItemContainerClasses,\n      styles: {\n        iconLabelContainer,\n        iconContainer,\n        startIconContainer,\n        labelContainer,\n        endIconContainer\n      }\n    } = useComponentTheme<MenuItemVariantOptions, MenuItemStyles>(MenuItemRedwoodTheme, {\n      current: isCurrent ? 'isCurrent' : 'notCurrent',\n      focusRing: showFocusRing ? 'isFocusRing' : 'notFocusRing',\n      variant: isDisabled ? 'disabled' : variant,\n      containerFocused: isContainerFocused ? 'isContainerFocused' : 'notContainerFocused',\n      submenuOpen: !!isSubmenuOpen ? 'isSubmenuOpen' : 'notSubmenuOpen'\n    });\n\n    const flexItemStyleInterpolations = mergeInterpolations<FlexitemProps>([\n      ...Object.values(flexitemInterpolations)\n    ]);\n    const { class: labelContainerFlexItemClasses, ...labelContainerFlexItemStyles } =\n      flexItemStyleInterpolations({\n        flex: '1 1 auto',\n        alignSelf: 'center'\n      });\n    const { class: iconContainerFlexItemClasses, ...iconContainerFlexItemStyles } =\n      flexItemStyleInterpolations({\n        flex: '0 0 auto',\n        alignSelf: 'center'\n      });\n\n    const startIconContainerClasses = classNames([\n      iconContainerFlexItemClasses,\n      iconLabelContainer,\n      iconContainer,\n      startIconContainer\n    ]);\n\n    const labelContainerClasses = classNames([\n      labelContainerFlexItemClasses,\n      iconLabelContainer,\n      labelContainer\n    ]);\n\n    const endIconContainerClasses = classNames([\n      iconContainerFlexItemClasses,\n      iconLabelContainer,\n      iconContainer,\n      endIconContainer\n    ]);\n\n    return (\n      <div\n        role=\"presentation\"\n        {...(submenuId !== undefined && type === 'submenu' && { 'aria-owns': submenuId })}>\n        <a\n          ref={(node: HTMLAnchorElement | null) => {\n            menuItemRef.current = node;\n            if (typeof ref === 'function') {\n              ref(node);\n            } else if (ref) {\n              ref.current = node;\n            }\n          }}\n          class={menuItemContainerClasses}\n          {...mergeProps(\n            interactionProps,\n            hoverProps,\n            pressProps,\n            getOpenSubmenuEvent(direction, openSubmenu),\n            getMenuItemClickChangeKey(id, changeKey)\n          )}\n          role={role}\n          data-oj-menu-item-key={id}\n          {...(type === 'submenu' && { 'aria-haspopup': true, 'aria-expanded': !!isSubmenuOpen })}\n          {...(isDisabled && { 'aria-disabled': true })}\n          {...(type === 'select' && { 'aria-checked': !!isChecked })}\n          tabIndex={isCurrent ? 0 : -1}>\n          {startIcon && (\n            <span style={iconContainerFlexItemStyles} class={startIconContainerClasses}>\n              {startIcon}\n            </span>\n          )}\n          <span style={labelContainerFlexItemStyles} class={labelContainerClasses}>\n            <Text variant=\"inherit\" size=\"md\" weight={menuItemLabelWeight}>\n              {label}\n            </Text>\n          </span>\n          {endIcon && (\n            <span style={iconContainerFlexItemStyles} class={endIconContainerClasses}>\n              {endIcon}\n            </span>\n          )}\n        </a>\n      </div>\n    );\n  }\n);\n"],"names":["getClientHints","createContext","useContext","useToggle","useId","useMemo","_jsx","forwardRef","useRef","useUser","useCallback","usePress","useLayoutEffect","useInteractionStyle","useComponentTheme","MenuItemRedwoodTheme","mergeInterpolations","flexitemInterpolations","classNames","_jsxs","mergeProps","Text"],"mappings":"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"}