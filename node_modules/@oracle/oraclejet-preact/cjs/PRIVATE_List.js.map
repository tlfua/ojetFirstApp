{"version":3,"file":"PRIVATE_List.js","sources":["../../src/PRIVATE_List/ListGroupHeader.tsx","../../src/PRIVATE_List/ListUtils.ts","../../src/PRIVATE_List/GroupLoadingIndicator.tsx","../../src/PRIVATE_List/index.ts"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { ComponentChildren } from 'preact';\nimport { useState } from 'preact/hooks';\nimport { classNames } from '../utils/UNSAFE_classNames';\nimport { Keys, containsKey } from '../utils/UNSAFE_keys';\nimport { useId } from '../hooks/UNSAFE_useId';\nimport { ToggleDetail } from '../UNSAFE_Collection';\nimport { ITEM_STYLE_CLASS } from '../PRIVATE_List/ListItem';\nimport { useViewportIntersect, ViewportConfig } from '../hooks/UNSAFE_useViewportIntersect';\nimport { TabbableModeContext } from '../hooks/UNSAFE_useTabbableMode';\nimport { useComponentTheme } from '../hooks/UNSAFE_useComponentTheme';\nimport { useInteractionStyle } from '../hooks/UNSAFE_useInteractionStyle';\nimport { mergeInterpolations } from '../utils/UNSAFE_mergeInterpolations';\nimport { flexitemInterpolations } from '../utils/UNSAFE_interpolations/flexitem';\nimport type { FlexitemProps } from '../utils/UNSAFE_interpolations/flexitem';\nimport { GroupedListStyles } from 'src/UNSAFE_GroupedList/themes/GroupedListStyles.css';\nimport { listGroupHeaderMultiVariantStyles } from './themes/ListStyles.css';\nimport { GroupedListRedwoodTheme } from '../UNSAFE_GroupedList/themes/redwood/GroupedListTheme';\n\n// default style class for items in ListView\nexport const GROUP_STYLE_CLASS = 'oj-c-listview-group';\nexport const GROUP_SELECTOR = '.' + GROUP_STYLE_CLASS;\nexport const STICKY_STYLE_CLASS = 'oj-c-listview-sticky';\n\n/**\n * Props for the ListViewItem Component\n */\nexport type Props<K> = {\n  children: ComponentChildren;\n  itemKey: K;\n  itemIndex: number;\n  itemDepth: number;\n  isFocused: boolean;\n  isFocusRingVisible: boolean;\n  isActive: boolean;\n  isGridlineVisible: boolean;\n  isExpandable: boolean;\n  expandedKeys: Keys<K>;\n  ariaDescribedBy?: string;\n  onToggle?: (detail: ToggleDetail<K>) => void;\n  viewportConfig?: ViewportConfig;\n};\n\n/**\n * The internal component used to render a group header in ExpandableList and GroupedList.\n */\nexport function ListGroupHeader<K extends string | number>({\n  ariaDescribedBy,\n  children,\n  itemKey,\n  itemIndex,\n  itemDepth,\n  isFocused,\n  isFocusRingVisible,\n  isActive,\n  isGridlineVisible,\n  isExpandable,\n  expandedKeys,\n  viewportConfig\n}: Props<K>) {\n  const [isStuck, setStuck] = useState(false);\n\n  const { classes: groupedListThemeClasses, styles: groupedListStyles } = useComponentTheme<\n    never,\n    GroupedListStyles\n  >(GroupedListRedwoodTheme);\n\n  const { interactionProps, applyHoverStyle, applyPseudoHoverStyle, applyActiveStyle } =\n    useInteractionStyle();\n\n  const variantClasses = listGroupHeaderMultiVariantStyles({\n    expandable: isExpandable ? 'isExpandable' : 'notExpandable',\n    needsEventsHover: applyHoverStyle ? 'isNeedsEventsHover' : 'notNeedsEventsHover',\n    pseudoHover: applyPseudoHoverStyle ? 'isPseudoHover' : 'notPseudoHover',\n    active: applyActiveStyle || isActive ? 'isActive' : 'notActive',\n    focusRingVisible:\n      isFocusRingVisible && isFocused ? 'isFocusRingVisible' : 'notFocusRingVisible',\n    gridlineTop: itemIndex > 0 ? 'visible' : 'hidden',\n    gridlineBottom: isGridlineVisible ? 'visible' : 'hidden'\n  });\n\n  const baseClasses = [ITEM_STYLE_CLASS, GROUP_STYLE_CLASS, variantClasses];\n  if (isStuck) {\n    baseClasses.push(groupedListThemeClasses);\n    baseClasses.push(groupedListStyles.stuckHeader);\n    baseClasses.push(STICKY_STYLE_CLASS);\n  }\n\n  const classes = classNames(baseClasses);\n  const styleInterpolations = mergeInterpolations<FlexitemProps>([\n    ...Object.values(flexitemInterpolations)\n  ]);\n  const { class: cls, ...cellStyles } = styleInterpolations({\n    alignSelf: 'center',\n    flex: '1 0 auto'\n  });\n\n  useViewportIntersect(\n    {\n      scroller: () => {\n        if (isExpandable) {\n          return null;\n        }\n        if (viewportConfig == null) {\n          return document.body;\n        }\n        return viewportConfig.scroller();\n      }\n    },\n    0,\n    1,\n    '[data-oj-key=' + itemKey + ']',\n    () => {\n      setStuck(false);\n    },\n    (entry: IntersectionObserverEntry) => {\n      if (entry.boundingClientRect.y !== entry.intersectionRect.y) {\n        setStuck(true);\n      }\n    }\n  );\n  return (\n    <div\n      id={useId()}\n      role=\"row\"\n      aria-rowindex={itemIndex + 1}\n      aria-level={isNaN(itemDepth) ? undefined : itemDepth + 1}\n      data-oj-key={itemKey}\n      class={classes}\n      {...(typeof itemKey === 'number' && { 'data-oj-key-type': 'number' })}\n      {...interactionProps}>\n      <div\n        id={useId()}\n        role=\"gridcell\"\n        aria-describedby={ariaDescribedBy}\n        aria-colindex={1}\n        aria-expanded={containsKey(expandedKeys, itemKey)}\n        style={cellStyles}>\n        <TabbableModeContext.Provider value={{ isTabbable: false }}>\n          {children}\n        </TabbableModeContext.Provider>\n      </div>\n    </div>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { FlattenedDataState } from '../UNSAFE_Collection';\nimport { Keys } from '../utils/UNSAFE_keys';\n\n/**\n * Helper function to only include keys of leaf items.\n */\nexport const excludeGroup = <K, D>(data: FlattenedDataState<K, D>, keys: Keys<K>) => {\n  if (!keys.all) {\n    const groups = data.data\n      .filter((dataMetadata) => {\n        return !dataMetadata.metadata.isLeaf;\n      })\n      .map((dataMetadata) => {\n        return dataMetadata.metadata.key;\n      });\n    const leafOnly = Array.from(keys.keys.values()).filter((key: K) => {\n      return !groups.includes(key);\n    });\n    return { ...keys, keys: new Set(leafOnly) };\n  }\n  return keys;\n};\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { Flex } from '../UNSAFE_Flex';\nimport { Skeleton } from '../UNSAFE_Skeleton';\nimport { SkeletonContainer } from './SkeletonContainer';\n\nexport const GroupLoadingIndicator = () => (\n  <SkeletonContainer minimumCount={3}>\n    {(index: number) => {\n      const padding = { paddingLeft: index * 10 + 'px' };\n      return (\n        <Flex height=\"12x\" align=\"center\">\n          <span style={padding}></span>\n          <Skeleton height=\"4x\" />\n        </Flex>\n      );\n    }}\n  </SkeletonContainer>\n);\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\n/**\n * PRIVATE Components not intended for outside use,\n *\n * NOTE: Types for these need to be public and are defined in UNSAFE_ListView/List.types.ts\n */\nexport { List } from './List';\nexport { ListGroupHeader, GROUP_SELECTOR, STICKY_STYLE_CLASS } from './ListGroupHeader';\nexport { SkeletonContainer } from './SkeletonContainer';\nexport { excludeGroup } from './ListUtils';\nexport { GroupLoadingIndicator } from './GroupLoadingIndicator';\n"],"names":["useState","useComponentTheme","GroupedListRedwoodTheme","useInteractionStyle","listGroupHeaderMultiVariantStyles","ITEM_STYLE_CLASS","classNames","mergeInterpolations","flexitemInterpolations","useViewportIntersect","_jsx","useId","containsKey","TabbableModeContext","SkeletonContainer","_jsxs","Flex","Skeleton"],"mappings":"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"}