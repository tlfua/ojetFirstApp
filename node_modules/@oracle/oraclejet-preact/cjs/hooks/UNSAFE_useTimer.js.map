{"version":3,"file":"UNSAFE_useTimer.js","sources":["../../../src/hooks/UNSAFE_useTimer/useTimer.ts","../../../src/hooks/UNSAFE_useTimer/index.ts"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { useEffect, useRef, useState } from 'preact/hooks';\n\ntype Props = {\n  isStarted: boolean;\n  delay?: number;\n};\n\n/**\n * Hook for a timer.\n * @param isStarted Specifies whether the timer should be started: true to start it, false to stop\n * it.\n * @param delay Specifies the delay after which the timer should expire.\n * @returns True if the timer expires, false if it was stopped before that.\n *\n */\nexport function useTimer({ isStarted, delay = 0 }: Props): boolean {\n  const timeoutId = useRef<ReturnType<typeof setTimeout> | null>(null);\n  const [isExpired, setExpired] = useState(false);\n  useEffect(() => {\n    if (!isStarted) {\n      // if not started, clear the current timeout\n      if (timeoutId.current) {\n        clearTimeout(timeoutId.current);\n        timeoutId.current = null;\n      }\n      setExpired(false);\n    } else {\n      // if started, only create a new timeout if we don't already have one\n      if (!timeoutId.current) {\n        timeoutId.current = setTimeout(() => {\n          setExpired(true);\n        }, delay);\n      }\n    }\n    return () => {\n      if (timeoutId.current) {\n        clearTimeout(timeoutId.current);\n        timeoutId.current = null;\n      }\n    };\n  }, [isStarted, delay]);\n\n  return isExpired;\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nexport { useTimer } from './useTimer';\n"],"names":["useRef","useState","useEffect"],"mappings":";;;;;;;AAAA;;;;;;AAMG;AASH;;;;;;;AAOG;AACG,SAAU,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,GAAG,CAAC,EAAS,EAAA;AACtD,IAAA,MAAM,SAAS,GAAGA,YAAM,CAAuC,IAAI,CAAC,CAAC;IACrE,MAAM,CAAC,SAAS,EAAE,UAAU,CAAC,GAAGC,cAAQ,CAAC,KAAK,CAAC,CAAC;IAChDC,eAAS,CAAC,MAAK;QACb,IAAI,CAAC,SAAS,EAAE;;YAEd,IAAI,SAAS,CAAC,OAAO,EAAE;AACrB,gBAAA,YAAY,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;AAChC,gBAAA,SAAS,CAAC,OAAO,GAAG,IAAI,CAAC;AAC1B,aAAA;YACD,UAAU,CAAC,KAAK,CAAC,CAAC;AACnB,SAAA;AAAM,aAAA;;AAEL,YAAA,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE;AACtB,gBAAA,SAAS,CAAC,OAAO,GAAG,UAAU,CAAC,MAAK;oBAClC,UAAU,CAAC,IAAI,CAAC,CAAC;iBAClB,EAAE,KAAK,CAAC,CAAC;AACX,aAAA;AACF,SAAA;AACD,QAAA,OAAO,MAAK;YACV,IAAI,SAAS,CAAC,OAAO,EAAE;AACrB,gBAAA,YAAY,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;AAChC,gBAAA,SAAS,CAAC,OAAO,GAAG,IAAI,CAAC;AAC1B,aAAA;AACH,SAAC,CAAC;AACJ,KAAC,EAAE,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC,CAAC;AAEvB,IAAA,OAAO,SAAS,CAAC;AACnB;;ACnDA;;;;;;AAMG;;;;"}