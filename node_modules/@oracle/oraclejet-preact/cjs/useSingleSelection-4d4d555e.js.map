{"version":3,"file":"useSingleSelection-4d4d555e.js","sources":["../../src/hooks/PRIVATE_useSingleSelection/useSingleSelection.ts"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { useCallback } from 'preact/hooks';\nimport { SingleSelectionDetail } from '../../UNSAFE_Collection';\n\nexport function useSingleSelection<K>(\n  keyExtractor: (element: HTMLElement) => K | null,\n  selected?: K,\n  onChange?: (detail: SingleSelectionDetail<K>) => void\n) {\n  const onClick = useCallback(\n    (event: MouseEvent) => {\n      handleSelect(event, keyExtractor, selected, onChange);\n    },\n    [keyExtractor, selected, onChange]\n  );\n\n  const onKeyUp = useCallback(\n    (event: KeyboardEvent) => {\n      if (event.key === 'Enter') {\n        handleSelect(event, keyExtractor, selected, onChange);\n      }\n    },\n    [keyExtractor, selected, onChange]\n  );\n\n  const selectionProps = onChange ? { onClick, onKeyDown, onKeyUp } : {};\n  return { selectionProps };\n}\n\n// prevent default (propagation) for keyDown to prevent arrow keys from scrolling the container\nconst onKeyDown = (event: KeyboardEvent) => {\n  if (event.key === 'Enter') {\n    event.preventDefault();\n  }\n};\n\nconst handleSelect = <K>(\n  event: Event,\n  keyExtractor: (element: HTMLElement) => K | null,\n  selected?: K,\n  onChange?: (detail: SingleSelectionDetail<K>) => void\n) => {\n  const itemKey = keyExtractor(event.target as HTMLElement);\n  if (onChange && itemKey && selected !== itemKey) {\n    onChange({ value: itemKey });\n    if (event.type === 'click') {\n      event.stopPropagation();\n    }\n  }\n};\n"],"names":["useCallback"],"mappings":";;;;;AAAA;;;;;;AAMG;SAIa,kBAAkB,CAChC,YAAgD,EAChD,QAAY,EACZ,QAAqD,EAAA;AAErD,IAAA,MAAM,OAAO,GAAGA,iBAAW,CACzB,CAAC,KAAiB,KAAI;QACpB,YAAY,CAAC,KAAK,EAAE,YAAY,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC;KACvD,EACD,CAAC,YAAY,EAAE,QAAQ,EAAE,QAAQ,CAAC,CACnC,CAAC;AAEF,IAAA,MAAM,OAAO,GAAGA,iBAAW,CACzB,CAAC,KAAoB,KAAI;AACvB,QAAA,IAAI,KAAK,CAAC,GAAG,KAAK,OAAO,EAAE;YACzB,YAAY,CAAC,KAAK,EAAE,YAAY,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC;AACvD,SAAA;KACF,EACD,CAAC,YAAY,EAAE,QAAQ,EAAE,QAAQ,CAAC,CACnC,CAAC;AAEF,IAAA,MAAM,cAAc,GAAG,QAAQ,GAAG,EAAE,OAAO,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,EAAE,CAAC;IACvE,OAAO,EAAE,cAAc,EAAE,CAAC;AAC5B,CAAC;AAED;AACA,MAAM,SAAS,GAAG,CAAC,KAAoB,KAAI;AACzC,IAAA,IAAI,KAAK,CAAC,GAAG,KAAK,OAAO,EAAE;QACzB,KAAK,CAAC,cAAc,EAAE,CAAC;AACxB,KAAA;AACH,CAAC,CAAC;AAEF,MAAM,YAAY,GAAG,CACnB,KAAY,EACZ,YAAgD,EAChD,QAAY,EACZ,QAAqD,KACnD;IACF,MAAM,OAAO,GAAG,YAAY,CAAC,KAAK,CAAC,MAAqB,CAAC,CAAC;AAC1D,IAAA,IAAI,QAAQ,IAAI,OAAO,IAAI,QAAQ,KAAK,OAAO,EAAE;AAC/C,QAAA,QAAQ,CAAC,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,CAAC;AAC7B,QAAA,IAAI,KAAK,CAAC,IAAI,KAAK,OAAO,EAAE;YAC1B,KAAK,CAAC,eAAe,EAAE,CAAC;AACzB,SAAA;AACF,KAAA;AACH,CAAC;;;;"}