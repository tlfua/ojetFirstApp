{"version":3,"file":"UNSAFE_matchTranslationBundle.js","sources":["../../../src/utils/UNSAFE_matchTranslationBundle/matchTranslationBundle.ts","../../../src/utils/UNSAFE_matchTranslationBundle/index.ts"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\n/**\n * This utility matches an array of preferred locales with a set of supported locales and\n * returns the best match for the user's preferred locale or null if none is found.\n * It is recommended to use this method when you need to load a translation bundle for RootEnvironmentProvider.\n * @returns the best match for user's preferred locale or null if none is found\n * @param preferredLocales - a list of user's preferred locales ordered from the most preferred to the least preferred\n * @param supportedLocales - a set of locales supported by the application\n */\nexport function matchTranslationBundle(\n  preferredLocales: Readonly<Array<string>>,\n  supportedLocales: Set<string>\n): string | null {\n  let match = null;\n\n  for (let l = 0; match === null && l < preferredLocales.length; l++) {\n    const locale = preferredLocales[l];\n    if (supportedLocales.has(locale)) {\n      match = locale;\n    } else {\n      match = _findPartialMatch(locale, supportedLocales);\n    }\n  }\n  return match;\n}\n\nfunction _findPartialMatch(locale: string, supportedLocales: Set<string>): string | null {\n  let match = null;\n  const sep = '-';\n  const parts = locale.split(sep);\n\n  while (match === null && parts.length > 1) {\n    parts.pop();\n    const partial = parts.join(sep);\n    if (supportedLocales.has(partial)) {\n      match = partial;\n    }\n  }\n\n  return match;\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nexport * from './matchTranslationBundle';\n"],"names":[],"mappings":";;;;;AAAA;;;;;;AAMG;AAEH;;;;;;;AAOG;AACa,SAAA,sBAAsB,CACpC,gBAAyC,EACzC,gBAA6B,EAAA;IAE7B,IAAI,KAAK,GAAG,IAAI,CAAC;AAEjB,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,KAAK,KAAK,IAAI,IAAI,CAAC,GAAG,gBAAgB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAClE,QAAA,MAAM,MAAM,GAAG,gBAAgB,CAAC,CAAC,CAAC,CAAC;AACnC,QAAA,IAAI,gBAAgB,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE;YAChC,KAAK,GAAG,MAAM,CAAC;AAChB,SAAA;AAAM,aAAA;AACL,YAAA,KAAK,GAAG,iBAAiB,CAAC,MAAM,EAAE,gBAAgB,CAAC,CAAC;AACrD,SAAA;AACF,KAAA;AACD,IAAA,OAAO,KAAK,CAAC;AACf,CAAC;AAED,SAAS,iBAAiB,CAAC,MAAc,EAAE,gBAA6B,EAAA;IACtE,IAAI,KAAK,GAAG,IAAI,CAAC;IACjB,MAAM,GAAG,GAAG,GAAG,CAAC;IAChB,MAAM,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;IAEhC,OAAO,KAAK,KAAK,IAAI,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;QACzC,KAAK,CAAC,GAAG,EAAE,CAAC;QACZ,MAAM,OAAO,GAAG,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AAChC,QAAA,IAAI,gBAAgB,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE;YACjC,KAAK,GAAG,OAAO,CAAC;AACjB,SAAA;AACF,KAAA;AAED,IAAA,OAAO,KAAK,CAAC;AACf;;AC/CA;;;;;;AAMG;;;;"}