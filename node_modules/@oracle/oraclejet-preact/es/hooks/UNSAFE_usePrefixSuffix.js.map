{"version":3,"file":"UNSAFE_usePrefixSuffix.js","sources":["../../../src/hooks/UNSAFE_usePrefixSuffix/usePrefixSuffix.tsx"],"sourcesContent":["import { PrefixSuffix } from '../../UNSAFE_PrefixSuffix';\nimport { useUser } from '../UNSAFE_useUser';\n\ntype Props = {\n  baseId: string;\n  hasEndContent?: boolean;\n  hasInsideLabel?: boolean;\n  hasStartContent?: boolean;\n  hasValue?: boolean;\n  isDisabled?: boolean;\n  isFocused?: boolean;\n  labelId?: string;\n  prefix?: string;\n  suffix?: string;\n  value?: string;\n};\n\n// returns the prefix and/or suffix components\n// if the condition in which they should be shown is met.\nexport const usePrefixSuffix = ({\n  baseId,\n  hasEndContent,\n  hasInsideLabel,\n  hasStartContent,\n  hasValue,\n  isDisabled,\n  isFocused,\n  labelId,\n  prefix,\n  suffix,\n  value\n}: Props) => {\n  const { direction } = useUser();\n  // for accessibility, if you have a prefix, then you must have a prefixId\n  const prefixId = `${baseId}-prefix`;\n  const suffixId = `${baseId}-suffix`;\n  const hasPrefixText = prefix !== undefined && prefix !== '';\n  const hasSuffixText = suffix !== undefined && suffix !== '';\n\n  const renderedPrefix =\n    hasPrefixText && !isDisabled && (hasValue || isFocused) ? (\n      <PrefixSuffix\n        id={prefixId}\n        hasEndContent={hasEndContent}\n        hasInsideLabel={hasInsideLabel}\n        hasStartContent={hasStartContent}\n        isDisabled={isDisabled}\n        isFocused={isFocused}\n        text={prefix}\n        variant=\"prefix\"\n      />\n    ) : undefined;\n\n  const renderedSuffix =\n    hasSuffixText && !isDisabled && (hasValue || isFocused) ? (\n      <PrefixSuffix\n        id={suffixId}\n        hasInsideLabel={hasInsideLabel}\n        isDisabled={isDisabled}\n        isFocused={isFocused}\n        text={suffix}\n        variant=\"suffix\"\n      />\n    ) : undefined;\n\n  // get value and prefix/suffix if available and return as plain text.\n  const text =\n    hasPrefixText || hasSuffixText ? getText(direction, hasValue, prefix, suffix, value) : value;\n  // get aria-labelledby if there is a prefix or suffix\n  const ariaLabelledBy =\n    hasPrefixText || hasSuffixText\n      ? getAriaLabelledBy(\n          labelId,\n          hasPrefixText ? prefixId : undefined,\n          hasSuffixText ? suffixId : undefined\n        )\n      : undefined;\n\n  return { renderedPrefix, renderedSuffix, text, ariaLabelledBy };\n};\n\n/**\n * Returns the value to render in plain text, taking into account the prefix and suffix\n * and reading direction. Do not add a prefix/suffix if the component doesn't have a value.\n * @returns string | undefined\n */\nfunction getText(\n  direction: 'ltr' | 'rtl',\n  hasValue?: boolean,\n  prefix?: string,\n  suffix?: string,\n  value?: string\n) {\n  // Do not add a prefix/suffix if the component doesn't have a value.\n  if (!hasValue) {\n    return value;\n  }\n  // TODO: direction is 'ltr' even though the storybook is rtl.\n  // Test this when the storybook bug is fixed. ?src=confmacro\n  const isLTR = direction === 'ltr';\n  const plainPrefix = prefix === undefined ? `` : isLTR ? `${prefix} ` : ` ${prefix}`;\n  const plainSuffix = suffix === undefined ? `` : isLTR ? ` ${suffix}` : `${suffix} `;\n\n  const ltrPlainText = `${plainPrefix}${value}${plainSuffix}`;\n  const rtlPlainText = `${plainSuffix}${value}${plainPrefix}`;\n  return isLTR ? ltrPlainText : rtlPlainText;\n}\n\nfunction getAriaLabelledBy(labelId?: string, prefixId?: string, suffixId?: string) {\n  const label = labelId ?? '';\n  const prefix = prefixId === undefined ? '' : label.length === 0 ? prefixId : ` ${prefixId}`;\n  const suffix =\n    suffixId === undefined\n      ? ''\n      : label.length === 0 && prefix.length === 0\n      ? suffixId\n      : ` ${suffixId}`;\n  const ariaLabelledBy = `${label}${prefix}${suffix}`;\n  return ariaLabelledBy.length === 0 ? undefined : ariaLabelledBy;\n}\n"],"names":["_jsx"],"mappings":"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"}