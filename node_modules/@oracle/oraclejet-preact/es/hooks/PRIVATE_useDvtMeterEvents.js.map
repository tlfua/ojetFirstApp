{"version":3,"file":"PRIVATE_useDvtMeterEvents.js","sources":["../../../src/hooks/PRIVATE_useDvtMeterEvents/events.ts","../../../src/hooks/PRIVATE_useDvtMeterEvents/usePointerEvents.ts","../../../src/hooks/PRIVATE_useDvtMeterEvents/useKeyboardEvents.ts","../../../src/hooks/PRIVATE_useDvtMeterEvents/useMeterDatatip.tsx","../../../src/hooks/PRIVATE_useDvtMeterEvents/index.ts"],"sourcesContent":["import type { MutableRef } from 'preact/hooks';\nimport { InputDetail } from '../../utils/UNSAFE_meterTypes';\n\nexport const handleInput = (\n  inputValue: number | undefined,\n  currentInput: MutableRef<number | undefined>,\n  onInput?: (detail: InputDetail) => void\n) => {\n  onInput?.({ value: inputValue } as InputDetail);\n  currentInput.current = inputValue;\n};\n\nexport const cancelEvent = (event: Event) => {\n  event.preventDefault();\n  event.stopPropagation();\n};\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { MutableRef, Ref, useRef } from 'preact/hooks';\nimport { handleInput } from './events';\nimport { CommitDetail, InputDetail } from '../../utils/UNSAFE_meterTypes';\n\ntype getValueFromEvent = (event: PointerEvent) => number | undefined;\n\nexport function usePointerEvents(\n  value: number | undefined,\n  getValue: getValueFromEvent,\n  targetRef: Ref<HTMLDivElement>,\n  currentInputRef: MutableRef<number | undefined>,\n  onCommit?: (detail: CommitDetail) => void,\n  onInput?: (detail: InputDetail) => void\n) {\n  const isPointerDown = useRef<boolean>(false);\n\n  const pointerUpHandler = (event: PointerEvent) => {\n    isPointerDown.current = false;\n    const val = getValue(event);\n    if (val !== undefined) {\n      onCommit?.({ value: val } as CommitDetail);\n    }\n  };\n\n  const hoverHandler = (event: PointerEvent) => {\n    if (isPointerDown.current) {\n      const val = getValue(event);\n      if (val !== undefined && val != currentInputRef.current) {\n        handleInput(val, currentInputRef, onInput);\n      }\n    }\n  };\n\n  const pointerDownHandler = (event: PointerEvent) => {\n    isPointerDown.current = true;\n    targetRef.current?.setPointerCapture(event.pointerId);\n    const val = getValue(event);\n    if (val !== undefined && val != currentInputRef.current) {\n      handleInput(val, currentInputRef, onInput);\n    }\n  };\n\n  const blurHandler = () => {\n    isPointerDown.current = false;\n    onCommit?.({ value: value } as CommitDetail);\n  };\n\n  return {\n    onPointerUp: pointerUpHandler,\n    onBlur: blurHandler,\n    onPointerMove: hoverHandler,\n    onPointerDown: pointerDownHandler\n  };\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { MutableRef } from 'preact/hooks';\nimport { useUser } from '../UNSAFE_useUser';\nimport { handleInput, cancelEvent } from './events';\nimport { CommitDetail, InputDetail } from '../../utils/UNSAFE_meterTypes';\n\nexport function useKeyboardEvents(\n  value: number,\n  min: number,\n  max: number,\n  step: number,\n  currentInputRef: MutableRef<number | undefined>,\n  onCommit?: (detail: CommitDetail) => void,\n  onInput?: (detail: InputDetail) => void\n) {\n  const { direction } = useUser();\n\n  const isRtl = direction === 'rtl';\n\n  const keyDownHandler = (event: KeyboardEvent) => {\n    const key = event.key;\n\n    switch (key) {\n      case 'Tab':\n        return;\n      case 'ArrowDown':\n        handleInput(Math.max(min, value - step), currentInputRef, onInput);\n        cancelEvent(event);\n        break;\n      case 'ArrowUp':\n        handleInput(Math.min(max, value + step), currentInputRef, onInput);\n        cancelEvent(event);\n        break;\n      case 'ArrowLeft': {\n        const inputValue = isRtl ? Math.min(max, value + step) : Math.max(min, value - step);\n        handleInput(inputValue, currentInputRef, onInput);\n        cancelEvent(event);\n        break;\n      }\n      case 'ArrowRight': {\n        const inputValue = isRtl ? Math.max(min, value - step) : Math.min(max, value + step);\n        handleInput(inputValue, currentInputRef, onInput);\n        cancelEvent(event);\n        break;\n      }\n    }\n  };\n\n  const keyUpHandler = (event: KeyboardEvent) => {\n    const key = event.key;\n\n    switch (key) {\n      case 'Enter':\n        onCommit?.({ value: value } as CommitDetail);\n        cancelEvent(event);\n        break;\n      case 'Tab':\n        handleInput(value, currentInputRef, onInput);\n        cancelEvent(event);\n        break;\n      case 'Home':\n        handleInput(min, currentInputRef, onInput);\n        cancelEvent(event);\n        break;\n      case 'End':\n        handleInput(max, currentInputRef, onInput);\n        cancelEvent(event);\n        break;\n    }\n  };\n\n  return {\n    onKeyUp: keyUpHandler,\n    onKeyDown: keyDownHandler\n  };\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { useState } from 'preact/hooks';\nimport { useTooltipControlled } from '../UNSAFE_useTooltip';\n\nexport function useMeterDatatip(value: number, datatip?: string | null, ariaDescribedBy?: string) {\n  const datatipText = datatip === null ? '' : datatip === undefined ? `${value}` : datatip;\n  const [isDatatipOpen, setDatatipOpen] = useState<boolean>(false);\n  const { tooltipContent, tooltipProps } = useTooltipControlled({\n    text: datatipText,\n    isOpen: isDatatipOpen,\n    position: 'top',\n    isDisabled: datatip === null,\n    anchor: { x: 'pointer', y: 'pointer' },\n    variant: 'datatip',\n    offset: {\n      mainAxis: 8,\n      crossAxis: 0\n    },\n    onToggle: ({ value }) => setDatatipOpen(value)\n  });\n\n  tooltipProps['aria-describedby'] = [ariaDescribedBy, tooltipProps['aria-describedby']]\n    .filter(Boolean)\n    .join(' ');\n\n  return { datatipContent: tooltipContent, datatipProps: tooltipProps };\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nexport { usePointerEvents } from './usePointerEvents';\nexport { useKeyboardEvents } from './useKeyboardEvents';\nexport { useMeterDatatip } from './useMeterDatatip';\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGO,MAAM,WAAW,GAAG,CACzB,UAA8B,EAC9B,YAA4C,EAC5C,OAAuC,KACrC;IACF,OAAO,GAAG,EAAE,KAAK,EAAE,UAAU,EAAiB,CAAC,CAAC;AAChD,IAAA,YAAY,CAAC,OAAO,GAAG,UAAU,CAAC;AACpC,CAAC,CAAC;AAEK,MAAM,WAAW,GAAG,CAAC,KAAY,KAAI;IAC1C,KAAK,CAAC,cAAc,EAAE,CAAC;IACvB,KAAK,CAAC,eAAe,EAAE,CAAC;AAC1B,CAAC;;ACfD;;;;;;AAMG;AAQa,SAAA,gBAAgB,CAC9B,KAAyB,EACzB,QAA2B,EAC3B,SAA8B,EAC9B,eAA+C,EAC/C,QAAyC,EACzC,OAAuC,EAAA;AAEvC,IAAA,MAAM,aAAa,GAAG,MAAM,CAAU,KAAK,CAAC,CAAC;AAE7C,IAAA,MAAM,gBAAgB,GAAG,CAAC,KAAmB,KAAI;AAC/C,QAAA,aAAa,CAAC,OAAO,GAAG,KAAK,CAAC;AAC9B,QAAA,MAAM,GAAG,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;QAC5B,IAAI,GAAG,KAAK,SAAS,EAAE;YACrB,QAAQ,GAAG,EAAE,KAAK,EAAE,GAAG,EAAkB,CAAC,CAAC;AAC5C,SAAA;AACH,KAAC,CAAC;AAEF,IAAA,MAAM,YAAY,GAAG,CAAC,KAAmB,KAAI;QAC3C,IAAI,aAAa,CAAC,OAAO,EAAE;AACzB,YAAA,MAAM,GAAG,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;YAC5B,IAAI,GAAG,KAAK,SAAS,IAAI,GAAG,IAAI,eAAe,CAAC,OAAO,EAAE;AACvD,gBAAA,WAAW,CAAC,GAAG,EAAE,eAAe,EAAE,OAAO,CAAC,CAAC;AAC5C,aAAA;AACF,SAAA;AACH,KAAC,CAAC;AAEF,IAAA,MAAM,kBAAkB,GAAG,CAAC,KAAmB,KAAI;AACjD,QAAA,aAAa,CAAC,OAAO,GAAG,IAAI,CAAC;QAC7B,SAAS,CAAC,OAAO,EAAE,iBAAiB,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;AACtD,QAAA,MAAM,GAAG,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;QAC5B,IAAI,GAAG,KAAK,SAAS,IAAI,GAAG,IAAI,eAAe,CAAC,OAAO,EAAE;AACvD,YAAA,WAAW,CAAC,GAAG,EAAE,eAAe,EAAE,OAAO,CAAC,CAAC;AAC5C,SAAA;AACH,KAAC,CAAC;IAEF,MAAM,WAAW,GAAG,MAAK;AACvB,QAAA,aAAa,CAAC,OAAO,GAAG,KAAK,CAAC;QAC9B,QAAQ,GAAG,EAAE,KAAK,EAAE,KAAK,EAAkB,CAAC,CAAC;AAC/C,KAAC,CAAC;IAEF,OAAO;AACL,QAAA,WAAW,EAAE,gBAAgB;AAC7B,QAAA,MAAM,EAAE,WAAW;AACnB,QAAA,aAAa,EAAE,YAAY;AAC3B,QAAA,aAAa,EAAE,kBAAkB;KAClC,CAAC;AACJ;;AC7DA;;;;;;AAMG;AAOa,SAAA,iBAAiB,CAC/B,KAAa,EACb,GAAW,EACX,GAAW,EACX,IAAY,EACZ,eAA+C,EAC/C,QAAyC,EACzC,OAAuC,EAAA;AAEvC,IAAA,MAAM,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,CAAC;AAEhC,IAAA,MAAM,KAAK,GAAG,SAAS,KAAK,KAAK,CAAC;AAElC,IAAA,MAAM,cAAc,GAAG,CAAC,KAAoB,KAAI;AAC9C,QAAA,MAAM,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC;AAEtB,QAAA,QAAQ,GAAG;AACT,YAAA,KAAK,KAAK;gBACR,OAAO;AACT,YAAA,KAAK,WAAW;AACd,gBAAA,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,GAAG,IAAI,CAAC,EAAE,eAAe,EAAE,OAAO,CAAC,CAAC;gBACnE,WAAW,CAAC,KAAK,CAAC,CAAC;gBACnB,MAAM;AACR,YAAA,KAAK,SAAS;AACZ,gBAAA,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,GAAG,IAAI,CAAC,EAAE,eAAe,EAAE,OAAO,CAAC,CAAC;gBACnE,WAAW,CAAC,KAAK,CAAC,CAAC;gBACnB,MAAM;YACR,KAAK,WAAW,EAAE;AAChB,gBAAA,MAAM,UAAU,GAAG,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,GAAG,IAAI,CAAC,CAAC;AACrF,gBAAA,WAAW,CAAC,UAAU,EAAE,eAAe,EAAE,OAAO,CAAC,CAAC;gBAClD,WAAW,CAAC,KAAK,CAAC,CAAC;gBACnB,MAAM;AACP,aAAA;YACD,KAAK,YAAY,EAAE;AACjB,gBAAA,MAAM,UAAU,GAAG,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,GAAG,IAAI,CAAC,CAAC;AACrF,gBAAA,WAAW,CAAC,UAAU,EAAE,eAAe,EAAE,OAAO,CAAC,CAAC;gBAClD,WAAW,CAAC,KAAK,CAAC,CAAC;gBACnB,MAAM;AACP,aAAA;AACF,SAAA;AACH,KAAC,CAAC;AAEF,IAAA,MAAM,YAAY,GAAG,CAAC,KAAoB,KAAI;AAC5C,QAAA,MAAM,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC;AAEtB,QAAA,QAAQ,GAAG;AACT,YAAA,KAAK,OAAO;gBACV,QAAQ,GAAG,EAAE,KAAK,EAAE,KAAK,EAAkB,CAAC,CAAC;gBAC7C,WAAW,CAAC,KAAK,CAAC,CAAC;gBACnB,MAAM;AACR,YAAA,KAAK,KAAK;AACR,gBAAA,WAAW,CAAC,KAAK,EAAE,eAAe,EAAE,OAAO,CAAC,CAAC;gBAC7C,WAAW,CAAC,KAAK,CAAC,CAAC;gBACnB,MAAM;AACR,YAAA,KAAK,MAAM;AACT,gBAAA,WAAW,CAAC,GAAG,EAAE,eAAe,EAAE,OAAO,CAAC,CAAC;gBAC3C,WAAW,CAAC,KAAK,CAAC,CAAC;gBACnB,MAAM;AACR,YAAA,KAAK,KAAK;AACR,gBAAA,WAAW,CAAC,GAAG,EAAE,eAAe,EAAE,OAAO,CAAC,CAAC;gBAC3C,WAAW,CAAC,KAAK,CAAC,CAAC;gBACnB,MAAM;AACT,SAAA;AACH,KAAC,CAAC;IAEF,OAAO;AACL,QAAA,OAAO,EAAE,YAAY;AACrB,QAAA,SAAS,EAAE,cAAc;KAC1B,CAAC;AACJ;;AClFA;;;;;;AAMG;SAKa,eAAe,CAAC,KAAa,EAAE,OAAuB,EAAE,eAAwB,EAAA;IAC9F,MAAM,WAAW,GAAG,OAAO,KAAK,IAAI,GAAG,EAAE,GAAG,OAAO,KAAK,SAAS,GAAG,CAAA,EAAG,KAAK,CAAA,CAAE,GAAG,OAAO,CAAC;IACzF,MAAM,CAAC,aAAa,EAAE,cAAc,CAAC,GAAG,QAAQ,CAAU,KAAK,CAAC,CAAC;AACjE,IAAA,MAAM,EAAE,cAAc,EAAE,YAAY,EAAE,GAAG,oBAAoB,CAAC;AAC5D,QAAA,IAAI,EAAE,WAAW;AACjB,QAAA,MAAM,EAAE,aAAa;AACrB,QAAA,QAAQ,EAAE,KAAK;QACf,UAAU,EAAE,OAAO,KAAK,IAAI;QAC5B,MAAM,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE;AACtC,QAAA,OAAO,EAAE,SAAS;AAClB,QAAA,MAAM,EAAE;AACN,YAAA,QAAQ,EAAE,CAAC;AACX,YAAA,SAAS,EAAE,CAAC;AACb,SAAA;QACD,QAAQ,EAAE,CAAC,EAAE,KAAK,EAAE,KAAK,cAAc,CAAC,KAAK,CAAC;AAC/C,KAAA,CAAC,CAAC;IAEH,YAAY,CAAC,kBAAkB,CAAC,GAAG,CAAC,eAAe,EAAE,YAAY,CAAC,kBAAkB,CAAC,CAAC;SACnF,MAAM,CAAC,OAAO,CAAC;SACf,IAAI,CAAC,GAAG,CAAC,CAAC;IAEb,OAAO,EAAE,cAAc,EAAE,cAAc,EAAE,YAAY,EAAE,YAAY,EAAE,CAAC;AACxE;;ACjCA;;;;;;AAMG;;;;"}