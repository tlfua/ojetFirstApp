define("oj-c/hooks/UNSAFE_useDataProvider/utils",["require","exports"],(function(require,e){"use strict";function t(e,t,a,s){const o=[...s];return e.forEach(((e,s)=>{const r={data:t[s],key:a[s]?.key,metadata:a[s]};e>=0?o.splice(e,0,r):o.push(r)})),o}async function a(e,t){const a=[],s=(await e.fetchByKeys({keys:t})).results;for(const e of t)if(s.has(e)){const t=s.get(e);a.push({...t,key:e})}return a}function s(e,t){return e.has(t)?e.get(t):-1}function o(e,t){const a=[...t];return e.sort(((e,t)=>t-e)),e.forEach((e=>{e<a.length&&a.splice(e,1)})),a}Object.defineProperty(e,"__esModule",{value:!0}),e.getUpdatedItemsFromMutationDetail=void 0,e.getUpdatedItemsFromMutationDetail=async function(e,r,n){const{add:i,remove:d,update:c}=e??{},u=new Map;for(const[e,t]of r.entries())u.set(t.key,e);let l=[...r];return d&&(l=function(e,t,a){const{indexes:r,keys:n}=e;let i=[...t];r?.length?i=o(r,i):n?.size&&(i=function(e,t,a){const r=[];return e.forEach((e=>{const t=s(a,e);-1!==t&&r.push(t)})),o(r,t)}(n,i,a));return i}(d,l,u)),i&&(l=await async function(e,o,r,n){const{addBeforeKeys:i,data:d,indexes:c,keys:u,metadata:l}=e;let f=[...o],h=d||[],p=l||[];if(0===h.length&&u?.size){const e=await a(n,u)??[];h=e.map((e=>e.data)),p=e.map((e=>e.metadata))}0===p.length&&u?.size&&(p=[...u].map((e=>({key:e}))));h.length&&(f=c?.length?t(c,h,p,f):i?.length?function(e,a,o,r){const n=[],i=[];return e.forEach((e=>{n.push(s(r,e)),i.push({key:e})})),t(n,a,i,o)}(i,h,f,r):function(e,a,s){return t(new Array(e.length).fill(-1),e,a,s)}(h,p,f));return f}(i,l,u,n)),c&&(l=await async function(e,t,o,r){const{data:n,indexes:i,keys:d,metadata:c}=e;let u=[...t],l=n||[],f=c||[];if(0===l.length&&d?.size){const e=await a(r,d)??[];l=e.map((e=>e.data)),f=e.map((e=>e.metadata))}0===f.length&&d?.size&&(f=[...d].map((e=>({key:e}))));l.length&&(i?.length?u=function(e,t,a,s){const o=[...s];return e.forEach(((e,s)=>{if(o[e]){const r={data:t[s],key:a[s]?.key,metadata:a[s]};o.splice(e,1,r)}})),o}(i,l,f,u):d?.size&&(u=function(e,t,a,o,r){const n=[...o];return e.forEach((e=>{const o=s(r,e),i={data:t[o],key:a[o]?.key,metadata:a[o]};o>=0&&n.splice(o,1,i)})),n}(d,l,f,u,o)));return u}(c,l,u,n)),l}})),define("oj-c/hooks/UNSAFE_useDataProvider/DataProviderHandler",["require","exports","./utils"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataProviderHandler=void 0;e.DataProviderHandler=class{constructor(e,a,s){this.handleMutateEvent=async e=>{const{detail:a}=e,s=this.addBusyState("updating data from mutation event"),o=await(0,t.getUpdatedItemsFromMutationDetail)(a,this.currentData,this.dataProvider);s?.(),this.currentData=o,this.callback?.onDataUpdated?.(o)},this.handleRefreshEvent=()=>{this._fetchDataAndNotify()},this.addBusyState=a,this.callback=s,this.dataProvider=e,this.currentData=[],e.addEventListener("refresh",this.handleRefreshEvent),e.addEventListener("mutate",this.handleMutateEvent),this._fetchDataAndNotify()}destroy(){this.callback=void 0,this.currentData=[],this.dataProvider.removeEventListener("refresh",this.handleRefreshEvent),this.dataProvider.removeEventListener("mutate",this.handleMutateEvent)}async _fetchData(){const e=[],t=this.dataProvider.fetchFirst({size:-1});for await(const a of t){const t=a.data.map(((e,t)=>({data:e,key:a.metadata[t].key,metadata:a.metadata[t]})));e.push(...t)}return this.currentData=e.slice(),e}async _fetchDataAndNotify(){const e=this.addBusyState("fetching data"),t=await this._fetchData();this.callback?.onDataUpdated?.(t),e()}}})),define("oj-c/hooks/UNSAFE_useDataProvider/useDataProvider",["require","exports","preact/hooks","./DataProviderHandler"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useDataProvider=void 0,e.useDataProvider=function({addBusyState:e,data:s}){const[o,r]=(0,t.useState)([]),n=(0,t.useRef)();return(0,t.useEffect)((()=>(void 0!==s&&(n.current=new a.DataProviderHandler(s,e,{onDataUpdated:r})),()=>{n.current?.destroy(),n.current=void 0})),[s,e]),{data:o}}}));var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("oj-c/message-toast/message-toast",["require","exports","preact/jsx-runtime","@oracle/oraclejet-preact/translationBundle","@oracle/oraclejet-preact/hooks/UNSAFE_useMessagesContext","@oracle/oraclejet-preact/UNSAFE_MessageToast","oj-c/hooks/UNSAFE_useDataProvider/useDataProvider","ojs/ojcontext","ojs/ojvcomponent","preact/hooks","css!oj-c/message-toast/message-toast-styles.css"],(function(require,e,t,a,s,o,r,n,i,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MessageToast=void 0,a=__importDefault(a),n=__importDefault(n),e.MessageToast=(0,i.registerCustomElement)("oj-c-message-toast",(function({data:e,detailTemplateValue:a,iconTemplateValue:c,messageTemplates:u,offset:l=0,position:f="bottom",onOjClose:h}){const p=(0,d.useRef)(!0),m=(0,d.useRef)((0,i.getUniqueId)()),y=(0,d.useRef)(),[v,g]=(0,d.useState)(Symbol()),D=(0,d.useCallback)(((e="MessageToast: busyState")=>y.current?n.default.getContext(y.current).getBusyContext().addBusyState({description:e}):()=>{}),[]);(0,d.useEffect)((()=>{p.current?p.current=!1:g(Symbol())}),[e]);const{data:_}=(0,r.useDataProvider)({data:e,addBusyState:D}),k=`messageToastLayer_${m.current}`,j=(0,d.useMemo)((()=>({addBusyState:D,UNSAFE_messagesLayerId:k})),[D,k]);return(0,t.jsx)(i.Root,{ref:y,"data-oj-messages-layer-id":k,children:(0,t.jsx)(s.MessagesContext.Provider,{value:j,children:(0,t.jsx)(o.MessageToast,{data:_,detailRendererKey:a,iconRendererKey:c,offset:l,onClose:h,position:f,renderers:u},v)})})}),"MessageToast",{properties:{data:{type:"DataProvider"},detailTemplateValue:{type:"string|function"},iconTemplateValue:{type:"string|function"},offset:{type:"number|object"},position:{type:"string",enumValues:["bottom","top","top-start","top-end","bottom-start","bottom-end","top-left","bottom-left","top-right","bottom-right"]}},extension:{_DYNAMIC_SLOT:{prop:"messageTemplates",isTemplate:1}},events:{ojClose:{}}},{offset:0,position:"bottom"},{"@oracle/oraclejet-preact":a.default})}));
//# sourceMappingURL=message-toast.js.map