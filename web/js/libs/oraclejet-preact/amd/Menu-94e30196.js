define(['exports', 'preact/jsx-runtime', 'preact/compat', './UNSAFE_Floating', './UNSAFE_Layer', 'preact/hooks', './utils/UNSAFE_mergeProps', './utils/UNSAFE_classNames', './hooks/UNSAFE_useUser', './MenuItem-9fdf5f2a', './UNSAFE_Menu/themes/MenuStyles.css', './classNames-711dac8e', './UNSAFE_Menu/themes/DropdownMenuStyles.css', './Floating-86f9017c', './useModal-129c8a8d', './UNSAFE_Menu/themes/SheetMenuStyles.css'], (function(e,t,n,s,r,o,a,u,l,c,i,d,m,p,f,h){"use strict";const b=({children:e,"aria-label":n,currentFocus:s="menu",display:r,closeSubmenu:u,menuId:m,menuLevel:p})=>{const{onClose:f}=c.useMenuContext(),{direction:h}=l.useUser(),b=o.useRef(null),v=o.useRef({wasMouseMoved:!1,lastMouseLeaveMenuItemdRelatedTarget:null}),g=o.useRef(!1),[M,x]=o.useState(),[S,k]=o.useState(!1),[C,w]=o.useState(!1),E=o.useCallback((e=>{x(e.key),"keyboard"===e.reason?k(!0):k(!1)}),[]),F=o.useCallback((()=>{const e=t=>{const n=c.keyElemExtractor(t.target),s=n?.key,r=n?.elem;if(s&&r){v.current.wasMouseMoved=!0;const t=new MouseEvent("mouseenter");r.dispatchEvent(t),b.current?.removeEventListener("mousemove",e)}};b.current?.addEventListener("mousemove",e)}),[]),{currentKeyProps:j}=function(e,t,n,s,r){const a=o.useMemo((()=>({ArrowDown:t,ArrowUp:e,Home:n,End:s})),[t,e,n,s]),u=o.useCallback((e=>{if(r){const t=a[e.key];if(t&&!e.shiftKey){const n=t();n&&r({key:n,reason:"keyboard"}),e.preventDefault()}}}),[r,a]);return{currentKeyProps:null==r?{}:{onKeyDown:u}}}(c.getPrevNext(b.current,!0,M),c.getPrevNext(b.current,!1,M),(()=>c.getNVisible(b.current,0)),(()=>c.getLastVisible(b.current)),E);return o.useEffect((()=>{if("main"===p&&g.current)return;g.current=!0;const e=b.current;let t;if("none"!==s&&e)if("menu"===s){E({key:void 0,reason:"click"});const n=()=>{e.focus()};"sheet"===r?n():t=setTimeout((()=>{n()}),y)}else if("firstItem"===s){const e=c.getNVisible(b.current,0);e&&E({key:e,reason:"keyboard"})}else if("secondItem"===s){const e=c.getNVisible(b.current,1);e&&E({key:e,reason:"keyboard"})}return()=>{clearTimeout(t)}}),[E,s,p,r]),o.useEffect((()=>{F()}),[F]),t.jsx("div",{...m&&{id:m},ref:b,tabIndex:M||"main"!==p&&"sheet"!==r?-1:0,role:"menu","aria-label":n,class:d.classNames([i.menuStyles.menuContainerStyle,i.menuStyles[`${r}MenuContainerStyle`]]),...a.mergeProps(j,c.getKeyboardCloseProps(f,p),c.getCloseSubmenuEvent(h,u),c.getMenuContainerFocusMethods((()=>{b.current?.contains(document.activeElement)||(k(!1),w(!1))}),(()=>{w(!0)})),c.getMenuContainerMouseLeave((e=>{e.relatedTarget.isEqualNode(v.current.lastMouseLeaveMenuItemdRelatedTarget)||(E({key:void 0,reason:"mouseEnter"}),b.current?.focus())})),c.getMenuPointerDown()),children:t.jsx(c.MenuContainerContext.Provider,{value:{menuContainerRef:b,currentKey:M,showFocusRing:S,changeKey:E,menuContainerGeneralInformation:v,isContainerFocused:C},children:e})})},y=0,v=n.forwardRef((({anchorRef:e,defaultPlacement:s,offsetValue:o,closeSubmenu:a,children:u,"aria-label":l,currentFocus:i,menuId:d,menuLevel:f,flipOptions:h},y)=>{const{onClose:v}=c.useMenuContext(),M=n.useCallback((e=>{if("sub"===f)return;const t=c.keyElemExtractor(e.target)?.key;t||v?.({reason:"outsideClick",target:e.target})}),[v,f]);return t.jsx(r.Layer,{logicalParentRef:e,children:t.jsx(p.Floating,{class:m.dropdownMenuStyles.base,onClickOutside:M,anchorRef:e,flipOptions:h,shiftOptions:{mainAxis:!1,crossAxis:!1},sizeOptions:{isMaxHeightAdjusted:!0,isMaxWidthAdjusted:!0},boundaryOptions:{padding:0},placement:s,offsetValue:o,children:t.jsx("div",{style:{minWidth:`${e.current&&e.current.offsetWidth>g?e.current.offsetWidth:g}px`},ref:y,children:t.jsx(b,{menuLevel:f,closeSubmenu:a,"aria-label":l,currentFocus:i,menuId:d,display:"dropdown",children:u})})})})})),g=200;const M=({children:e})=>t.jsx("div",{class:h.sheetMenuStyles.modalWrapper,children:e}),x=n.forwardRef((({children:e},n)=>t.jsx("div",{class:h.sheetMenuStyles.modalContainer,ref:n,children:e}))),S=({backdropVisible:e=!1})=>t.jsx("div",{class:d.classNames([h.sheetMenuStyles.modalBackdrop,e&&h.sheetMenuStyles.modalBackdropVisible])}),k=({children:e,"aria-label":n,currentFocus:s,anchorRef:a,closeSubmenu:u,menuLevel:l})=>{const{onClose:i}=c.useMenuContext();o.useEffect((()=>{const e=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=e}}),[]);const d=o.useCallback((()=>{i?.({reason:"dismissed"})}),[i]),{backdropRef:m}=f.useModal({isOpen:!0,onBackdropClick:d}),{swipeProps:p}=function(e,{threshold:t=10,maximumTime:n=300,tolerance:s=50,isDisabled:r=!1}={threshold:10,maximumTime:300,tolerance:50,isDisabled:!1}){const a=o.useRef({pointerDownId:0,startTime:null,prevpageX:0,prevpageY:0,elementScrollTop:0}),u=o.useCallback((()=>{a.current={pointerDownId:null,startTime:0,prevpageX:0,prevpageY:0,elementScrollTop:0}}),[]),l=o.useCallback((e=>{const t=e.changedTouches[0];a.current.pointerDownId?u():a.current={pointerDownId:t.identifier,startTime:e.timeStamp,prevpageX:t.pageX,prevpageY:t.pageY,elementScrollTop:e.currentTarget.scrollTop}}),[u]),c=o.useCallback((r=>{const o=r.changedTouches[0];o.identifier===a.current.pointerDownId&&a.current.startTime&&r.timeStamp-a.current.startTime<n&&o.pageY-a.current.prevpageY>t&&Math.abs(o.pageX-a.current.prevpageX)<=s&&0===a.current.elementScrollTop&&e?.({direction:"down"}),u()}),[t,e,u,n,s]);return{swipeProps:r?{}:{onTouchStart:l,onTouchEnd:c,ontouchcancel:u}}}(d);return t.jsx(r.Layer,{logicalParentRef:a,children:t.jsxs(M,{children:[t.jsx(S,{backdropVisible:"main"===l}),t.jsx(x,{ref:m,children:t.jsx("div",{class:h.sheetMenuStyles.sheetMenuContainerWrapper,...p,children:t.jsx(b,{ariaLabel:n,currentFocus:s,display:"sheet",closeSubmenu:u,menuLevel:l,children:e})})})]})})},C=c.getIsMobile();e.DropdownMenu=v,e.Menu=({onClose:e,isOpen:n,initialFocus:s,...r})=>t.jsx(c.MenuContext.Provider,{value:{onClose:e,isMobile:C},children:n?t.jsx(t.Fragment,{children:C?t.jsx(k,{...{...r,currentFocus:s,menuLevel:"main"}}):t.jsx(v,{...{...r,currentFocus:s,menuLevel:"main",defaultPlacement:"bottom-start",offsetValue:{mainAxis:4,crossAxis:0},flipOptions:{crossAxis:!0,mainAxis:!0,fallbackPlacements:["bottom-end","top-start","top-end","end-top","start-top","end-bottom","start-bottom"]}}})}):null}),e.SheetMenu=k}));
//# sourceMappingURL=Menu-94e30196.js.map
