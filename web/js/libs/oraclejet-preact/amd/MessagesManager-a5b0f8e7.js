define(['exports', 'preact/jsx-runtime', 'preact', 'preact/hooks', './PRIVATE_TransitionGroup', './hooks/UNSAFE_useAnimation', './hooks/UNSAFE_useMessagesContext', './useAnimation-95b1d0bd'], (function(n,e,t,i,r,a,s,o){"use strict";const c={};function u({animationStates:n=c,initialAnimationStyles:t,onEntering:a,onExiting:u,...d}){const[l,g]=i.useState("entering"),m=i.useRef(),x=i.useRef(),{controller:v,nodeRef:y}=o.useAnimation(l,{animationStates:n,isAnimatedOnMount:!0,onAnimationEnd:i.useCallback((()=>{m.current?.(),m.current=void 0,x.current?.(),x.current=void 0}),[])}),{addBusyState:k}=s.useMessagesContext(),A=i.useCallback(((e,t,i)=>{m.current&&(m.current=void 0,v.cancel()),x.current?.(),x.current=void 0,a?.(e,void 0,i),g("entering"),void 0!==n.entering||void 0!==n["exiting => entering"]?(m.current=t,x.current=k?.("messages animating")):t?.()}),[n,v,k,a]),S=i.useCallback(((e,t,i)=>{m.current&&(m.current=void 0,v.cancel()),x.current?.(),x.current=void 0,u?.(e,void 0,i),g("exiting"),void 0!==n.exiting||void 0!==n["entering => exiting"]?(m.current=t,x.current=k?.("messages animating")):t?.()}),[n,v,k,u]);return i.useLayoutEffect((()=>()=>x.current?.()),[]),e.jsx("div",{ref:y,style:t,children:e.jsx(r.Transition,{...d,onEntering:A,onExiting:S})})}n.MessagesManager=function({data:n,animationStates:a,children:s,initialAnimationStyles:o,onMessageWillRemove:c}){const d=i.useCallback((async(n,e)=>{e&&c?.(e.key,e.index,n)}),[c]);return e.jsx(r.TransitionGroup,{elementType:t.Fragment,children:n.map(((n,t)=>e.jsx(u,{animationStates:a,initialAnimationStyles:o,metadata:{index:t,key:n.key},onExited:d,children:s?.({index:t,item:n})},n.key)))})}}));
//# sourceMappingURL=MessagesManager-a5b0f8e7.js.map
