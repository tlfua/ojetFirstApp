define(['exports', 'preact/jsx-runtime', 'preact', 'preact/hooks', './UNSAFE_Flex', './utils/UNSAFE_mergeProps', './useSingleSelection-676ac428', './hooks/PRIVATE_useCurrentKey', './hooks/PRIVATE_useCollectionFocusRing', './utils/PRIVATE_collectionUtils', './hooks/UNSAFE_useId', './hooks/UNSAFE_useTranslationBundle', './UNSAFE_HiddenAccessible', './PRIVATE_Collection', './utils/UNSAFE_classNames', 'preact/compat', './hooks/UNSAFE_useComponentTheme', './UNSAFE_Indexer/themes/redwood/IndexerTheme', './classNames-711dac8e', './Flex-cd926f6b', './Collection-c1cb73c1', './HiddenAccessible-15b5d5ef'], (function(e,t,s,n,r,o,a,c,l,i,u,d,y,f,x,k,b,h,m,j,R,v){"use strict";const F=Object.freeze({key:"__others__",label:"#"}),T="oj-indexer-item",S="."+T,N=k.forwardRef(((e,s)=>{const n=d.useTranslationBundle("@oracle/oraclejet-preact"),{context:r,selectedKey:o}=e,a=r.data.key===o,c=g(e,s),{classes:l}=b.useComponentTheme(h.IndexerRedwoodTheme,{focused:c.ref&&c.isFocusRingVisible?"isFocused":"notFocused",disabled:r.data.isDisabled?"isDisabled":"notDisabled",selected:a?"isSelected":"notSelected"}),i=m.classNames([c.class,l]),u=r.data.label||r.data.key,y=r.data.isDisabled?n.indexer_disabledLabel({SECTION:`${u}`}):`${u}`;return t.jsx("li",{...c,class:i,"data-oj-valuetext":y,"data-oj-disabled":r.data.isDisabled,children:r.data.label||r.data.key})}));function g({context:e,currentKey:t,valueNow:s,isFocusRingVisible:n},r){return{...e.data.key===t&&{ref:r},key:e.data.key,class:T,"data-oj-key":e.data.key,"data-oj-key-type":typeof e.data.key,"data-oj-valuenow":s,isFocusRingVisible:!!n}}const p=k.forwardRef((({lastValueNow:e,...n},r)=>{const o={...n,ref:r};return t.jsxs(s.Fragment,{children:[t.jsx(N,{...o}),t.jsx(E,{...o,ref:r,context:{index:-1,data:F},valueNow:e})]})})),E=k.forwardRef(((e,s)=>{const{context:n,selectedKey:r}=e,o=g(e,s),a=n.data.key===r,{classes:c}=b.useComponentTheme(h.IndexerRedwoodTheme,{focused:o.ref&&o.isFocusRingVisible?"isFocused":"notFocused",selected:a?"isSelected":"notSelected"}),l=m.classNames([o.class,c]),i=F.label;return t.jsx("li",{...o,class:l,"data-oj-valuetext":i,children:n.data.label})})),_=k.forwardRef(((e,s)=>{const n=d.useTranslationBundle("@oracle/oraclejet-preact"),{context:r,sections:o}=e,a=g(e,s),{from:c,to:l}=w(e);if(!I(r.index,c,l))return null;const i=o[c].label||o[c].key,u=o[l].label||o[l].key,{classes:y,styles:{dotStyle:f}}=b.useComponentTheme(h.IndexerRedwoodTheme,{focused:a.ref&&a.isFocusRingVisible?"isFocused":"notFocused"}),x=m.classNames([a.class,y]),k=n.indexer_separatorLabel({FROM_SECTION:`${i}`,TO_SECTION:`${u}`});return t.jsx("li",{...a,class:x,"data-oj-valuetext":k,children:t.jsx(j.Flex,{align:"center",justify:"center",children:t.jsx("div",{class:f})})})}));function w({context:e,sectionsPerTruncation:t,last:s}){const n=e.index-e.index%t+1;let r=n+t-2;return r=r>=s?s-1:r,{from:n,to:r}}function I(e,t,s){return e===Math.floor((t+s)/2)}const A=[{key:"A"},{key:"B"},{key:"C"},{key:"D"},{key:"E"},{key:"F"},{key:"G"},{key:"H"},{key:"I"},{key:"J"},{key:"K"},{key:"L"},{key:"M"},{key:"N"},{key:"O"},{key:"P"},{key:"Q"},{key:"R"},{key:"S"},{key:"T"},{key:"U"},{key:"V"},{key:"W"},{key:"X"},{key:"Y"},{key:"Z"}];const C=(e,t,s)=>e===t.current?void 0===s?null:s:i.keyExtractor(e,S),V=(e,t,s)=>{if(e.value===F.key)t({value:F.key});else{t({value:s.find((t=>t.key===e.value)).key})}},P=(e,t,s,n,r,o,a)=>{if(0===e||0===t)return;const c=e/t,l=s-1;if(c<2)r!==l&&(o(l),a(n));else if(c>s||s-c<.01)r>1&&(o(1),a(n));else{const e=K(c,l);e!==r&&e<s&&(o(e),a(n))}},K=(e,t)=>{e-=2,e/=2;const s=Math.round(t/e)+1,n=t%s,r=Math.floor(t/s)+(n>1?1:0);let o=t-(r-1)*s,a=s;for(;a>o;)a-=1,o=t-(r-1)*a;return a!=s&&(a+=1),a};function U(e){return i.isMobile()?e.indexer_touchInstructionText():e.indexer_keyboardInstructionText()}e.Indexer=function({sections:e=A,value:r,onCommit:y=(()=>{})}){const f=n.useRef(null),x=n.useRef(null),k=s.createRef(),[m,F]=n.useState(e[0]?.key),[T,g]=n.useState(-1),E=n.useRef(-1),K=n.useRef(0),O=u.useId(),[D,H]=l.useCollectionFocusRing((e=>!!f.current?.contains(e)),["ArrowUp","ArrowDown"]),{currentKeyProps:M}=c.useCurrentKey((e=>i.keyExtractor(e,S)),!0,i.getPrevNextKey(f.current,m,!0,S),i.getPrevNextKey(f.current,m,!1,S),void 0,void 0,m,(e=>F(e.value))),{selectionProps:B}=a.useSingleSelection((e=>C(e,x,m)),void 0,(t=>V(t,y,e))),$=n.useCallback((t=>{for(const s of t)P(s.contentRect.height,K.current,e.length,e[0]?.key,T,g,F)}),[e,T]);n.useEffect((()=>{x.current&&(x.current.setAttribute("aria-valuemax",E.current+1+""),x.current.setAttribute("aria-valuetext",k.current?.dataset?.ojValuetext||""),x.current.setAttribute("aria-valuenow",k.current?.dataset?.ojValuenow||"")),E.current=-1})),n.useEffect((()=>{const t=f.current;t&&(K.current=t.querySelector("li")?.offsetHeight||0,P(t.offsetHeight,K.current,e.length,e[0]?.key,T,g,F))}),[e,T]),n.useEffect((()=>{const e=f.current;if(e){const t=new ResizeObserver((e=>{$(e)}));return t.observe(e),()=>{t.unobserve(e)}}}),[T,$]);const L=d.useTranslationBundle("@oracle/oraclejet-preact"),{styles:{baseStyle:z,innerStyle:q}}=b.useComponentTheme(h.IndexerRedwoodTheme);return t.jsxs("div",{ref:f,class:z,children:[t.jsx(j.Flex,{align:"center",width:"6x",height:"100%",children:t.jsx("ul",{...o.mergeProps(M,H,B),ref:x,tabIndex:0,"aria-label":"Indexer","aria-orientation":"vertical","aria-valuemin":0,"aria-describedby":O,role:"slider",class:q,children:t.jsx(R.Collection,{items:e,children:s=>{const n=e.length-1;E.current+=1;const o={context:s,ref:k,currentKey:m,selectedKey:r,valueNow:E.current,isFocusRingVisible:!!D};if(s.index===n)return t.jsx(p,{...o,lastValueNow:E.current+1});if(T<=1||s.index%T==0)return t.jsx(N,{...o});const a={...o,sectionsPerTruncation:T,last:n,sections:e};return function(e){const{from:t,to:s}=w(e);return I(e.context.index,t,s)}(a)?t.jsx(_,{...a}):(E.current-=1,null)}})})}),t.jsx(v.HiddenAccessible,{children:t.jsx("span",{id:O,children:U(L)})})]})},e.SECTION_OTHERS=F}));
//# sourceMappingURL=Indexer-d6af7e4a.js.map
