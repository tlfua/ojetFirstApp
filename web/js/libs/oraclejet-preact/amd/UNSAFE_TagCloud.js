define(['exports', 'preact/jsx-runtime', './utils/UNSAFE_classNames', './ColorUtils-71f7bc8b', './LayoutUtils-1d313095', './UNSAFE_TagCloud/themes/TagCloudStyles.css', './classNames-711dac8e', 'preact/hooks', './hooks/UNSAFE_useUser', './PRIVATE_TrackResizeContainer', './hooks/UNSAFE_useTooltip', './utils/UNSAFE_mergeProps', './hooks/UNSAFE_useTranslationBundle', './hooks/PRIVATE_useTextDimensions', './hooks/PRIVATE_useVizSelection', './utils/UNSAFE_size', 'css!./TagCloudStyles.styles.css', './index-182af2cd', 'preact', './Common', './Common/themes', './Common/themes/redwood/theme', './Common/themes/themeContract.css', 'preact/compat', './hooks/PRIVATE_useSize', './hooks/PRIVATE_useResizeObserver', './hooks/UNSAFE_useId', './UNSAFE_Floating', './Floating-86f9017c', './index-f653d9ca', './utils/PRIVATE_floatingUtils', './utils/PRIVATE_refUtils', './hooks/UNSAFE_useOutsideClick', './utils/UNSAFE_arrayUtils', './hooks/UNSAFE_useComponentTheme', './utils/UNSAFE_logger', './_curry1-ce36c4e7', './_curry2-d90c5517', './utils-7a8b0c59', './UNSAFE_Floating/themes/redwood/FloatingTheme', './UNSAFE_Floating/themes/FloatingStyles.css', 'css!./FloatingStyles.styles.css', './UNSAFE_Floating/themes/redwood/FloatingBaseTheme.css', 'module', './UNSAFE_Floating/themes/redwood/FloatingVariants.css', './vanilla-extract-recipes-createRuntimeFn.esm-9d536a1b', './vanilla-extract-dynamic.esm-acef6fab', './UNSAFE_Floating/themes/FloatingContract.css', './UNSAFE_Layer', './useThemeInterpolations-48286702', './hooks/UNSAFE_useColorScheme', './hooks/UNSAFE_useScale', './utils/UNSAFE_interpolations/theme', './UNSAFE_Theme', './utils/UNSAFE_mergeInterpolations', './_curry3-4fb0ed44', './_has-580e26f1', './hooks/UNSAFE_useHover', './hooks/UNSAFE_useToggle', './hooks/UNSAFE_useFocus', './hooks/UNSAFE_useTouch', './hooks/UNSAFE_useAnimation', './useAnimation-95b1d0bd', './hooks/UNSAFE_useThemeInterpolations', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentTheme', './hooks/UNSAFE_useTooltip/themes/TooltipContentStyles.css', 'css!./TooltipContentStyles.styles.css', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentBaseTheme.css', 'module', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentVariants.css', 'css!./TooltipContentVariants.styles2.css', './utils/PRIVATE_clientHints', './clientHints-ff5d5d13'], (function(e,t,o,n,s,i,r,l,a,c,u,d,h,f,m,S,g,p,x,I,F,A,y,_,C,U,T,E,b,w,N,v,k,z,R,P,M,V,L,B,D,j,H,$,O,K,X,q,G,J,Q,W,Y,Z,ee,te,oe,ne,se,ie,re,le,ae,ce,ue,de,he,fe,me,Se,ge,pe,xe){"use strict";function Ie(e,t){const{idx:o}=e;return t[o]}function Fe(e){return null!=e?.15*e:0}function Ae(e){return{getItem:t=>Ie(t,e),getDetailFromInfo:t=>{if(!t)return{id:void 0};return{id:Ie(t,e).id}},getPrevItemInfo:t=>function(e,t){let o=e.idx;return o=Math.max(0,o-1),{idx:o,id:t[o].id}}(t,e),getNextItemInfo:t=>function(e,t){let o=e.idx;return o=Math.min(t.length-1,o+1),{idx:o,id:t[o].id}}(t,e)}}const ye=20,_e=(e,t,o,n)=>t===o?12:12+Math.ceil((n-1)*(e-t)/(o-t)*12);function Ce(e){const t=[];let o=Number.MAX_VALUE,n=-Number.MAX_VALUE;for(let t=0;t<e.length;t++)o=Math.min(o,e[t].value),n=Math.max(n,e[t].value);for(let s=0;s<e.length;s++){const i=_e(e[s].value,o,n,3);t.push({...e[s],fontSize:i})}return t}function Ue(e,t){const o=[0];let n=e[0].w+2;if(e.length>1)for(let s=1;s<e.length;s++)n+e[s].w>t&&(o.push(s),n=0),n+=e[s].w+2;return o}function Te(e,t,o,n,i,r){let l;return l="cloud"!==e&&e?function(e,t,o,n,s){const i=[],r=[];let l=0,a=0,c=0;const u=Ce(e);for(let e=0;e<u.length;e++){const t=u[e],o=s(t.label,{fontSize:t.fontSize+"px"});l=Math.max(l,o.width),a=Math.max(a,o.height),c=Math.max(c,t.fontSize),r.push({w:o.width,h:o.height,x:o.x,y:o.y})}let d,h,f=0,m=(t-0)/l;for(;m-f>.001;)d=(f+m)/2,h=Ue(r,(t-0)/d),h.length*(d*a+2)-2>o-0?m=d:f=d;d=f,h=Ue(r,(t-0)/d),h.push(u.length);for(let e=0;e<h.length-1;e++){const o=h[e],s=h[e+1];let l=5,c=0,f=!0;if(s-o>1){let n=0;for(let e=o;e<s;e++)n+=r[e].w*d,c=Math.max(c,r[e].h*d);if(l=(t-0-n)/(s-o-1),e==h.length-2){const e=.5*c;e<l&&n+(s-o)*e<.9*(t-0)&&(l=e,f=!1)}}const m=0+(e+1)*(a*d+2)-2;let S=0;for(let e=o;e<s;e++){const a=u[e],c=a.fontSize*d;a.fontSize=c;const h=r[e].w*d;a.y=0+m+r[e].y*d-ye,f&&e===s-1&&e!==o?a.x=n?0+h+0-t:0+t-h-0:(a.x=0+S,n?S-=r[e].w*d+l:S+=r[e].w*d+l),i.push({...a,w:h,h:r[e].h*d})}}return i}(t,o,n,i,r):function(e,t,o,n,i){const r=[],l=180;let a=10/l,c=10/l;t>o?a*=t/o:c*=o/t;const u=2*Math.PI/l;let d=null,h=0;const f=[],m=[],S=[],g=Ce(e);for(let e=0;e<g.length;e++){let t=!1,o=0,n=4;const S=g[e],p=i(S.label,{fontSize:S.fontSize+"px"});h=Math.max(h,S.fontSize);let x=-1;for(;!t;){const i=o%l;void 0===f[i]&&(f[i]=Math.cos(o*u)),void 0===m[i]&&(m[i]=Math.sin(o*u));const h=a*o*f[i],g=c*o*m[i],I=Fe(p.height),F={x:h,y:g,w:p.width+2*I,h:p.height+2*I};if(t=!0,-1!==x&&s.intersects(r[x],F)&&(t=!1),t)for(let o=0;o<e;o++)if(s.intersects(r[o],F)){x=o,t=!1;break}t&&(d=d?s.getUnion(d,F):F,x=-1,r[e]=F,S.x=h,S.y=g,S.w=p.width,S.h=p.height),3600==o?n=3:5400==o?n=2:10800==o&&(n=1),o+=n}}if(d){const e=Math.max(d.w/t,d.h/o),s=d.x+d.w/2,i=d.y+d.h/2;for(let r=0;r<g.length;r++){let l;const a=g[r];l=n?null!=a.x?0-a.x/e-(t/2-s/e):0:null!=a.x?0+a.x/e+(t/2-s/e):0;const c=null!=a.y?0+a.y/e+(o/2-i/e):0,u=null!=a.w?a.w/e:0,d=null!=a.h?a.h/e:0,h=a.fontSize/e;S.push({...a,x:l,y:c,fontSize:h,w:u,h:d})}}return S}(t,o,n,i,r),l}function Ee(e,t,o,s,i,r,l,a,c){let u,d=!1;if(!s){const e=t===l?.idx,o=t===i?.idx;d=!!(e&&l?.isCurrent||o&&i?.isCurrent)}const h=function(e,t){if(t)return 0===t.length||new Set(t).has(e)}(e.id,a),f=function(e,t){return!(!t||0===t.length)&&new Set(t).has(e)}(e.id,r);if(e.color){let t,o,s;f?(o=e.color,t=n.getContrastingTextColor(o)):t=e.color,u={color:t,backgroundColor:o,backgroundImage:s}}else o||(u={backgroundColor:"none"});return{isCurrent:d,isHighlighted:h,isSelected:f,isFocused:!!l&&Ne(l,t),key:e.id,itemIdx:t,style:u,activeId:d?c:void 0,isReadOnly:s,...e}}function be(e){const t=e.dataset.idx;if(null!=t)return{idx:Number(t)}}function we(e,t){return e?.idx===t?.idx}function Ne(e,t){if(!e.isFocusVisible)return!1;const{idx:o}=e;return o===t}const ve=e=>{const{itemBase:o,itemStyle:n,hoverUnselectedItemStyle:s,selectedItemStyle:l,hoveredSelectedItemStyle:a,dimmedItemStyle:c,interactiveCursorStyle:u}=i.styles,d=e.isHighlighted||null==e.isHighlighted,h=r.classNames([o,e.isSelected?l:n,e.isCurrent?e.isSelected?a:e.isFocused||e.supportsSelection?s:"":"",d?"":c,e.supportsAction||e.supportsSelection?u:""]),f=(m=!!e.supportsSelection,S=e.translations,g=e.isSelected,p=e.accessibleLabel,x=e.role,{"aria-label":[p,m?g?S?.dataVisualization_stateSelected():S?.dataVisualization_stateUnselected():""].filter(Boolean).join(". ")||void 0,role:x||"img"});var m,S,g,p,x;const I=Fe(e.h);return t.jsx("div",{class:h,"data-id":`${e.id}`,"data-idx":e.itemIdx,style:{...e.style,transform:`translate(${(e.x||0)-I}px,${(e.y||0)-I}px)`,fontSize:e.fontSize,padding:`${I}px`,lineHeight:e.fontSize+"px"},id:e.activeId,...f,children:e.label})};const ke=(e,t,o,n)=>{let s=0,i=8;if(n?.current&&t.isCurrent&&e.current&&null!=n?.current.x&&null!=n?.current.w&&null!=n?.current.y&&null!=n?.current.h){const t=e.current.getBoundingClientRect();s=(o?-1:1)*n.current.x+n.current.w/2-t.width/2,i+=-1*n.current.y}return{crossAxis:s,mainAxis:i}};e.TagCloud=function({selectionMode:e="none",layout:o="cloud",height:n="112x",width:r="100%",items:g,onItemAction:p,onItemInput:x,...I}){const F=l.useRef(null),A=l.useRef(null),y=h.useTranslationBundle("@oracle/oraclejet-preact"),_=g.filter((e=>!I.hiddenIds?.includes(e.id))),C=_&&0!==_.length,U=!(!e||"none"===e),T=null!=p,E=T&&null===x,b=function(e,t,o){return{"aria-label":`${o||""} ${t?"":e.dataVisualization_noData()}`,role:"application"}}(y,C,I.accessibleLabel),{getItem:w,getDetailFromInfo:N,getPrevItemInfo:v,getNextItemInfo:k}=Ae(_),{hoveredItemInfo:z,focusedItemInfo:R,...P}=function(e,t,o,n,i,r){const[c,u]=l.useState({idx:0}),[d,h]=l.useState(),f=l.useRef(),{direction:m}=a.useUser(),S="rtl"===m,g=o=>{const n=be(o.target);we(n,d)||(h(n&&{...n,isCurrent:!0}),f.current=s.getRandomId(),e&&(u({...c,isCurrent:!1}),r?.(t(n))))},p=()=>{h(void 0),f.current=void 0,e&&r?.(t())};if(!e)return{focusedItemInfo:c,hoveredItemInfo:d,onPointerLeave:p,onPointerMove:g};function x(e){r?.(t(e)),f.current=s.getRandomId(),u(e)}function I(e){we(e,c)||(e.isCurrent=!0,e.isFocusVisible=!0,d&&h({...d,isCurrent:!1}),x(e))}const F=()=>{const{id:e}=t(c);null!=e&&(i?.({id:e}),f.current=s.getRandomId())};return{focusedItemInfo:c,hoveredItemInfo:d,"aria-activedescendant":f.current,onPointerUp:e=>{const o=be(e.target);if(null!=o){u(o);const{id:e}=t(o);null!=e&&(i?.({id:e}),f.current=s.getRandomId())}else i?.({id:void 0})},onPointerMove:g,onKeyUp:e=>{switch(e.code){case"Space":case"Enter":F();break;case"Tab":x({...c,isCurrent:!0,isFocusVisible:!0})}},onKeyDown:e=>{switch(e.key){case"Tab":return;case"ArrowDown":I(n(c));break;case"ArrowUp":I(o(c));break;case"ArrowRight":I(S?o(c):n(c));break;case"ArrowLeft":I(S?n(c):o(c))}(e=>{e.preventDefault(),e.stopPropagation()})(e)},onPointerLeave:p,onBlur:()=>{(null!=d||c.isCurrent)&&r?.(t(void 0));const e={...c,isCurrent:!1,isFocusVisible:!1};u(e)}}}(!E&&C,N,v,k,p,x),M=function(e,t,o,n,s){if(s)return s;const i=n?.isCurrent;return i&&null!=n.idx?t(n,e)?.accessibleLabel:o&&o.isCurrent?t(o,e)?.accessibleLabel:void 0}(_,w,R,z,I.datatip),{datatipContent:V,datatipProps:L}=(({text:e,rootRef:t,focusedItemRef:o,focusedItemInfo:n})=>{const{direction:s}=a.useUser(),i="rtl"===s,[r,c]=l.useState(ke(t,n,i,o)),[d,h]=l.useState(!1);l.useLayoutEffect((()=>{c(ke(t,n,i,o))}),[n]);const f=n?.isCurrent?"element":"pointer",{tooltipContent:m,tooltipProps:S}=u.useTooltipControlled({text:e,position:"top",isDisabled:!1,variant:"datatip",anchor:{x:f,y:f},offset:r,isOpen:d,onToggle:({value:e})=>h(e)});return{datatipContent:m,datatipProps:S}})({text:M,rootRef:F,focusedItemInfo:R,focusedItemRef:A}),B=m.useSelection({idExtracter:e=>{const t="keyup"===e.type?R:be(e.target);return N(t).id},selection:I.selectedIds,selectionMode:e,onChange:I.onSelectionChange}),D=d.mergeProps(P,L,B),{direction:j}=a.useUser();return t.jsx(c.TrackResizeContainer,{width:S.sizeToCSS(r)||r||"0px",height:S.sizeToCSS(n)||n||"0px",children:(e,n)=>{const{textMeasureContent:s,getTextDimensions:r}=f.useTextDimensions(),[a,c]=l.useState([]);return l.useLayoutEffect((()=>{r&&C&&c(Te(o,_,e,n,"rtl"===j,r))}),[o,_,e,n,j,r]),t.jsxs("div",{ref:F,tabIndex:E?void 0:0,style:{width:e,height:n},class:i.baseStyles,...b,...D,children:[a.map(((e,o)=>{const n=Ee(e,o,U,E,z,I.selectedIds,R,I.highlightedIds,P["aria-activedescendant"]);return R.idx===o&&(A.current=e),t.jsx(ve,{fontSize:e.fontSize,x:e.x,y:e.y,accessibleLabel:e.accessibleLabel,supportsSelection:U,supportsAction:T,translations:y,...n})})),s,V]})}})},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=UNSAFE_TagCloud.js.map
