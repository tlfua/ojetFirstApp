{"version":3,"file":"SelectMenuItem-5a199d9f.js","sources":["../../src/UNSAFE_Menu/SelectMenuGroupContext.tsx","../../src/UNSAFE_Menu/SelectMenuItem.tsx","../../src/UNSAFE_Menu/useSelectMenuGroupContext.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { createContext } from 'preact';\n\nimport { MenuValueUpdateDetail } from './menuUtils';\n\ntype SelectSingleMenuGroupContextProps = {\n  isMultiple: false;\n  value?: string;\n  onCommit?: (detail: MenuValueUpdateDetail<string>) => void;\n};\ntype SelectMultipleMenuGroupContextProps = {\n  isMultiple: true;\n  value?: string[];\n  onCommit?: (detail: MenuValueUpdateDetail<string[]>) => void;\n};\n\ntype SelectMenuGroupContextProps =\n  | SelectSingleMenuGroupContextProps\n  | SelectMultipleMenuGroupContextProps;\n\nconst SelectMenuGroupContext = createContext<SelectMenuGroupContextProps>({\n  isMultiple: false\n});\n\nexport { SelectMenuGroupContext, SelectMenuGroupContextProps };\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { ComponentChildren } from 'preact';\nimport { useMemo } from 'preact/hooks';\nimport { useId } from '../hooks/UNSAFE_useId';\n\nimport { CheckIcon } from '../PRIVATE_ThemedIcons/CheckIcon';\n\nimport { BaseMenuItem } from './MenuItem';\nimport { useSelectMenuGroupContext } from './useSelectMenuGroupContext';\n\ntype SelectMenuItemProps = {\n  value: string;\n  label: string;\n  isDisabled?: boolean;\n  endIcon?: ComponentChildren;\n};\n\nexport function SelectMenuItem({ value, label, isDisabled, endIcon }: SelectMenuItemProps) {\n  const { isMultiple, value: selectedValue, onCommit } = useSelectMenuGroupContext();\n  const uniqueID = useId();\n  const id = useMemo(() => `oj-menu-item-${uniqueID}`, [uniqueID]);\n\n  const { isSelected, memoizedOnCommit } = useMemo(() => {\n    if (!isMultiple) {\n      return {\n        isSelected: selectedValue === value,\n        memoizedOnCommit: () => {\n          onCommit?.({ value, previousValue: selectedValue });\n        }\n      };\n    }\n    return {\n      isSelected: !!selectedValue?.includes(value),\n      memoizedOnCommit: () => {\n        const proposedValue = isSelected\n          ? selectedValue?.filter((val) => val !== value) || []\n          : [...(selectedValue || []), value];\n        onCommit?.({ value: proposedValue, previousValue: selectedValue });\n      }\n    };\n  }, [selectedValue, value, onCommit, isMultiple]);\n\n  return (\n    <BaseMenuItem\n      id={id}\n      type=\"select\"\n      role={isMultiple ? 'menuitemcheckbox' : 'menuitemradio'}\n      isChecked={isSelected}\n      isDisabled={isDisabled}\n      startIcon={isSelected ? <CheckIcon /> : <span></span>}\n      label={label}\n      onAction={memoizedOnCommit}\n      endIcon={endIcon}\n    />\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { useContext } from 'preact/hooks';\nimport { SelectMenuGroupContext } from './SelectMenuGroupContext';\n\n/**\n * Utility hook for consuming the MenuContext\n *\n * @returns The value of MenuContext provider\n */\nfunction useSelectMenuGroupContext() {\n  return useContext(SelectMenuGroupContext);\n}\n\nexport { useSelectMenuGroupContext };\n"],"names":["SelectMenuGroupContext","createContext","isMultiple","value","label","isDisabled","endIcon","selectedValue","onCommit","useContext","uniqueID","useId","id","useMemo","isSelected","memoizedOnCommit","includes","proposedValue","filter","val","previousValue","_jsx","BaseMenuItem","type","role","isChecked","startIcon","jsx","CheckIcon","onAction"],"mappings":"qLA2BM,MAAAA,EAAyBC,EAAAA,cAA2C,CACxEC,YAAY,gDCJR,UAAyBC,MAAEA,EAAKC,MAAEA,EAAKC,WAAEA,EAAUC,QAAEA,IACzD,MAAMJ,WAAEA,EAAYC,MAAOI,EAAaC,SAAEA,GCRnCC,EAAAA,WAAWT,GDSZU,EAAWC,EAAAA,QACXC,EAAKC,EAAOA,SAAC,IAAM,gBAAgBH,KAAY,CAACA,KAEhDI,WAAEA,EAAUC,iBAAEA,GAAqBF,EAAOA,SAAC,IAC1CX,EAQE,CACLY,aAAcP,GAAeS,SAASb,GACtCY,iBAAkB,KAChB,MAAME,EAAgBH,EAClBP,GAAeW,QAAQC,GAAQA,IAAQhB,KAAU,GACjD,IAAKI,GAAiB,GAAKJ,GAC/BK,IAAW,CAAEL,MAAOc,EAAeG,cAAeb,GAAgB,GAb7D,CACLO,WAAYP,IAAkBJ,EAC9BY,iBAAkB,KAChBP,IAAW,CAAEL,QAAOiB,cAAeb,GAAgB,IAaxD,CAACA,EAAeJ,EAAOK,EAAUN,IAEpC,OACEmB,EAAAA,IAACC,EAAAA,aACC,CAAAV,GAAIA,EACJW,KAAK,SACLC,KAAMtB,EAAa,mBAAqB,gBACxCuB,UAAWX,EACXT,WAAYA,EACZqB,UAAWZ,EAAaO,EAAAM,IAACC,EAASA,UAAA,CAAA,GAAMP,EAAAA,IAAA,OAAA,CAAA,GACxCjB,MAAOA,EACPyB,SAAUd,EACVT,QAASA,GAGf"}