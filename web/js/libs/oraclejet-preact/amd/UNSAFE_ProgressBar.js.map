{"version":3,"file":"UNSAFE_ProgressBar.js","sources":["../../src/UNSAFE_ProgressBar/ProgressBar.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { ComponentProps } from 'preact';\nimport { classNames } from '../utils/UNSAFE_classNames';\nimport { useUser } from '../hooks/UNSAFE_useUser';\nimport { useTranslationBundle } from '../hooks/UNSAFE_useTranslationBundle';\nimport type { BundleType } from '../resources/nls/bundle';\nimport { BarTrack, BarValue } from '../PRIVATE_Meter';\nimport { HTMLAttributesSignalExcluded } from '../utils/UNSAFE_attributeUtils';\nimport { useComponentTheme } from '../hooks/UNSAFE_useComponentTheme';\nimport { ProgressBarStyles, ProgressBarVariantOptions } from './themes/ProgressBarStyles.css';\nimport { ProgressBarRedwoodTheme } from './themes/redwood/ProgressBarTheme';\n\ntype ariaPropsType = ComponentProps<typeof BarTrack>['ariaProps'];\n\ntype IntrinsicProps = Pick<\n  HTMLAttributesSignalExcluded<HTMLDivElement>,\n  'id' | 'class' | 'children'\n>;\n\ntype Props = {\n  /**\n   * Specifies the id of the progress bar.  If the progress bar is being used to describe the loading process of a particular region\n   * of the page, then the aria-describedby attribute of the region must point to the id of the ProgressBar\n   */\n  id?: IntrinsicProps['id'];\n  /**\n   * The value of the progress bar.  If the value is 'indeterminate', an indeterminate progress bar will be shown.\n   */\n  value?: 'indeterminate' | number;\n\n  /**\n   * Whether the progress bar is positioned at the top edge of a container or not.\n   * If set to 'top', the curved borders will be removed.\n   */\n  edge?: 'none' | 'top';\n\n  /**\n   * The maximum value of the progress bar.\n   */\n  max?: number;\n  /**\n   * The width of the progress bar.  This will use the CSS lengths styling.\n   */\n  // TODO: use the dimensions work the Jeanne is doing JET-49961\n  width?: string;\n\n  /**\n   * A label to be used for accessibility purposes when value is set to 'indeterminate'. This will be used for the aria-valuetext of the DOM element.\n   */\n  'aria-valuetext'?: string;\n};\n/**\n * A progress bar allows the user to visualize the progression of an extended computer operation.\n */\nexport function ProgressBar({ value, max, ...otherProps }: Props) {\n  return value === 'indeterminate' ? (\n    <IndeterminateProgressBar {...otherProps} />\n  ) : (\n    <DeterminateProgressBar value={value} max={max} {...otherProps} />\n  );\n}\n\ntype IndeterminateProps = Omit<Props, 'value' | 'max'>;\n\nconst IndeterminateProgressBar = ({ id, width, edge = 'none', ...props }: IndeterminateProps) => {\n  const {\n    classes,\n    styles: {\n      valueStyle,\n      indeterminate,\n      animationStyleLTR,\n      animationStyleRTL,\n      highContrastValueStyle\n    }\n  } = useComponentTheme<ProgressBarVariantOptions, ProgressBarStyles>(ProgressBarRedwoodTheme, {\n    edge: edge === 'none' ? edge : undefined\n  });\n\n  const { direction, forcedColors } = useUser();\n  const barValueClasses = classNames([\n    valueStyle,\n    indeterminate,\n    direction === 'rtl' ? animationStyleRTL : animationStyleLTR,\n    forcedColors === 'active' ? highContrastValueStyle : ''\n  ]);\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n  const ariaProps: ariaPropsType = {\n    'aria-valuetext': props['aria-valuetext'] || translations.progressIndeterminate(),\n    role: 'progressbar'\n  };\n  return (\n    <BarTrack id={id} ariaProps={ariaProps} class={classes} length={width}>\n      <BarValue class={barValueClasses} />\n    </BarTrack>\n  );\n};\n\ntype DeterminateProps = Omit<Props, 'aria-valuetext'> & {\n  value?: number;\n};\n\nconst DeterminateProgressBar = ({\n  value = 0,\n  max = 100,\n  id,\n  width,\n  edge = 'none'\n}: DeterminateProps) => {\n  const { forcedColors } = useUser();\n  const {\n    classes,\n    styles: { valueStyle, highContrastValueStyle }\n  } = useComponentTheme<ProgressBarVariantOptions, ProgressBarStyles>(ProgressBarRedwoodTheme, {\n    edge: edge === 'none' ? edge : undefined\n  });\n\n  const barValueClasses = classNames([\n    valueStyle,\n    forcedColors === 'active' ? highContrastValueStyle : ''\n  ]);\n\n  const percentage = `${Math.min(Math.max(0, value / max), 1) * 100}%`;\n  const ariaProps: ariaPropsType = {};\n  ariaProps['aria-valuemin'] = value != null ? 0 : undefined;\n  ariaProps['aria-valuemax'] = value != null ? max : undefined;\n  ariaProps['aria-valuenow'] = value != null ? value : undefined;\n  ariaProps['role'] = 'progressbar';\n  return (\n    <BarTrack ariaProps={ariaProps} id={id} length={width} class={classes}>\n      <BarValue class={barValueClasses} length={percentage} />\n    </BarTrack>\n  );\n};\n"],"names":["IndeterminateProgressBar","id","width","edge","props","classes","styles","valueStyle","indeterminate","animationStyleLTR","animationStyleRTL","highContrastValueStyle","useComponentTheme","ProgressBarRedwoodTheme","undefined","direction","forcedColors","useUser","barValueClasses","classNames","translations","useTranslationBundle","ariaProps","progressIndeterminate","role","_jsx","jsx","BarTrack","class","length","children","BarValue","DeterminateProgressBar","value","max","percentage","Math","min","otherProps"],"mappings":"u6BAsEA,MAAMA,EAA2B,EAAGC,KAAIC,QAAOC,OAAO,UAAWC,MAC/D,MAAMC,QACJA,EACAC,QAAQC,WACNA,EAAUC,cACVA,EAAaC,kBACbA,EAAiBC,kBACjBA,EAAiBC,uBACjBA,IAEAC,EAAAA,kBAAgEC,EAAAA,wBAAyB,CAC3FV,KAAe,SAATA,EAAkBA,OAAOW,KAG3BC,UAAEA,EAASC,aAAEA,GAAiBC,EAAOA,UACrCC,EAAkBC,EAAAA,WAAW,CACjCZ,EACAC,EACc,QAAdO,EAAsBL,EAAoBD,EACzB,WAAjBO,EAA4BL,EAAyB,KAEjDS,EAAeC,uBAAiC,4BAChDC,EAA2B,CAC/B,iBAAkBlB,EAAM,mBAAqBgB,EAAaG,wBAC1DC,KAAM,eAER,OACEC,EAAAC,IAACC,EAAQA,SAAA,CAAC1B,GAAIA,EAAIqB,UAAWA,EAAWM,MAAOvB,EAASwB,OAAQ3B,EAAK4B,SACnEL,EAAAA,IAACM,EAAQA,SAAC,CAAAH,MAAOV,KAEnB,EAOEc,EAAyB,EAC7BC,QAAQ,EACRC,MAAM,IACNjC,KACAC,QACAC,OAAO,WAEP,MAAMa,aAAEA,GAAiBC,EAAAA,WACnBZ,QACJA,EACAC,QAAQC,WAAEA,EAAUI,uBAAEA,IACpBC,EAAiBA,kBAA+CC,0BAAyB,CAC3FV,KAAe,SAATA,EAAkBA,OAAOW,IAG3BI,EAAkBC,EAAAA,WAAW,CACjCZ,EACiB,WAAjBS,EAA4BL,EAAyB,KAGjDwB,EAAwD,IAAxCC,KAAKC,IAAID,KAAKF,IAAI,EAAGD,EAAQC,GAAM,GAAtC,IACbZ,EAA2B,CAAA,EAKjC,OAJAA,EAAU,iBAA4B,MAATW,EAAgB,OAAInB,EACjDQ,EAAU,iBAA4B,MAATW,EAAgBC,OAAMpB,EACnDQ,EAAU,iBAA4B,MAATW,EAAgBA,OAAQnB,EACrDQ,EAAgB,KAAI,cAElBG,EAAAC,IAACC,WAAQ,CAACL,UAAWA,EAAWrB,GAAIA,EAAI4B,OAAQ3B,EAAO0B,MAAOvB,EAAOyB,SACnEL,EAAAA,IAACM,EAAQA,UAACH,MAAOV,EAAiBW,OAAQM,KAE5C,gBA7EE,UAAsBF,MAAEA,EAAKC,IAAEA,KAAQI,IAC3C,MAAiB,kBAAVL,EACLR,EAAAC,IAAC1B,EAAwB,IAAKsC,IAE9Bb,EAAAA,IAACO,EAAuB,CAAAC,MAAOA,EAAOC,IAAKA,KAASI,GAExD"}